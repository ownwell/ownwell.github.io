<!DOCTYPE html>
<html lang=zh>
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="utf-8">
  
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
  <meta name="renderer" content="webkit">
  <meta http-equiv="Cache-Control" content="no-transform">
  <meta http-equiv="Cache-Control" content="no-siteapp">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="format-detection" content="telephone=no,email=no,adress=no">
  <!-- Color theme for statusbar -->
  <meta name="theme-color" content="#000000">
  <!-- å¼ºåˆ¶é¡µé¢åœ¨å½“å‰çª—å£ä»¥ç‹¬ç«‹é¡µé¢æ˜¾ç¤º,é˜²æ­¢åˆ«äººåœ¨æ¡†æ¶é‡Œè°ƒç”¨é¡µé¢ -->
  <meta http-equiv="window-target" content="_top">
  
  
  <title>ã€Androidè¿›é˜¶ã€‘Androidä¸­ä½¿ç”¨ProGuard | Hexo</title>
  <meta name="description" content="å¯¹äºä¸€ä¸ªæœ‰ç»éªŒçš„ç¨‹åºå‘˜ï¼ŒProGuardå¤§å®¶ä¸€å®šä¸é™Œç”Ÿï¼Œæœ‰äººè¯´ä»–æ˜¯æ··æ·†ï¼Œæˆ‘å¿…é¡»çº æ­£ï¼Œæ··æ·†åªæ˜¯ProGuardçš„ä¸€ä¸ªè¿‡ç¨‹(æˆ‘ä¸ä¼šç§°ProGuardä¸ºæ··æ·†ï¼ŒProGuardå°±æ˜¯ProGuardï¼Œè°å†è¯´ProGuardæ‰æ˜¯çœŸæ­£çš„æ··æ·†è§†å¬ï¼Œä¸‹é¢æœ‰è§£é‡Š).ProGuardå…¶å®ä¸æ˜¯Androidç‰¹æœ‰çš„å·¥å…·ï¼Œä»–å…¶å®æ›´æ—©é€‚ç”¨äºjavaé¡¹ç›®ä¸­ï¼Œä¼˜åŒ–javaä»£ç ï¼Œä¿è¯javaç¨‹åºçš„å®‰å…¨æ€§ã€‚ç”±äºAndroidç¨‹åºå¤§éƒ¨åˆ†">
<meta name="keywords" content="Androidè¿›é˜¶">
<meta property="og:type" content="article">
<meta property="og:title" content="ã€Androidè¿›é˜¶ã€‘Androidä¸­ä½¿ç”¨ProGuard">
<meta property="og:url" content="http://ownwell.github.io/2017/10/30/android-better-progurad/index.html">
<meta property="og:site_name" content="Cyning">
<meta property="og:description" content="å¯¹äºä¸€ä¸ªæœ‰ç»éªŒçš„ç¨‹åºå‘˜ï¼ŒProGuardå¤§å®¶ä¸€å®šä¸é™Œç”Ÿï¼Œæœ‰äººè¯´ä»–æ˜¯æ··æ·†ï¼Œæˆ‘å¿…é¡»çº æ­£ï¼Œæ··æ·†åªæ˜¯ProGuardçš„ä¸€ä¸ªè¿‡ç¨‹(æˆ‘ä¸ä¼šç§°ProGuardä¸ºæ··æ·†ï¼ŒProGuardå°±æ˜¯ProGuardï¼Œè°å†è¯´ProGuardæ‰æ˜¯çœŸæ­£çš„æ··æ·†è§†å¬ï¼Œä¸‹é¢æœ‰è§£é‡Š).ProGuardå…¶å®ä¸æ˜¯Androidç‰¹æœ‰çš„å·¥å…·ï¼Œä»–å…¶å®æ›´æ—©é€‚ç”¨äºjavaé¡¹ç›®ä¸­ï¼Œä¼˜åŒ–javaä»£ç ï¼Œä¿è¯javaç¨‹åºçš„å®‰å…¨æ€§ã€‚ç”±äºAndroidç¨‹åºå¤§éƒ¨åˆ†">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="http://7xwwa2.com1.z0.glb.clouddn.com/proguard_intro.png">
<meta property="og:image" content="http://7xwwa2.com1.z0.glb.clouddn.com/proguard_intro.png">
<meta property="og:updated_time" content="2018-02-26T06:51:34.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="ã€Androidè¿›é˜¶ã€‘Androidä¸­ä½¿ç”¨ProGuard">
<meta name="twitter:description" content="å¯¹äºä¸€ä¸ªæœ‰ç»éªŒçš„ç¨‹åºå‘˜ï¼ŒProGuardå¤§å®¶ä¸€å®šä¸é™Œç”Ÿï¼Œæœ‰äººè¯´ä»–æ˜¯æ··æ·†ï¼Œæˆ‘å¿…é¡»çº æ­£ï¼Œæ··æ·†åªæ˜¯ProGuardçš„ä¸€ä¸ªè¿‡ç¨‹(æˆ‘ä¸ä¼šç§°ProGuardä¸ºæ··æ·†ï¼ŒProGuardå°±æ˜¯ProGuardï¼Œè°å†è¯´ProGuardæ‰æ˜¯çœŸæ­£çš„æ··æ·†è§†å¬ï¼Œä¸‹é¢æœ‰è§£é‡Š).ProGuardå…¶å®ä¸æ˜¯Androidç‰¹æœ‰çš„å·¥å…·ï¼Œä»–å…¶å®æ›´æ—©é€‚ç”¨äºjavaé¡¹ç›®ä¸­ï¼Œä¼˜åŒ–javaä»£ç ï¼Œä¿è¯javaç¨‹åºçš„å®‰å…¨æ€§ã€‚ç”±äºAndroidç¨‹åºå¤§éƒ¨åˆ†">
<meta name="twitter:image" content="http://7xwwa2.com1.z0.glb.clouddn.com/proguard_intro.png">
  <!-- Canonical links -->
  <link rel="canonical" href="http://ownwell.github.io/2017/10/30/android-better-progurad/index.html">
  
    <link rel="alternate" href="/atom.xml" title="Cyning" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png" type="image/x-icon">
  
  <link rel="stylesheet" href="/css/style.css">
  
  
  
  
</head>


<body class="main-center theme-green" itemscope itemtype="http://schema.org/WebPage">
  <header class="header" itemscope itemtype="http://schema.org/WPHeader">
  <div class="slimContent">
    <div class="navbar-header">
      
      
      <div class="profile-block text-center">
        <a id="avatar" href="https://github.com/ownwell" target="_blank">
          <img class="img-circle img-rotate" src="/images/cyning.png" width="200" height="200">
        </a>
        <h2 id="name" class="hidden-xs hidden-sm">Cyning</h2>
        <h3 id="title" class="hidden-xs hidden-sm hidden-md">Android Developer</h3>
        <small id="location" class="text-muted hidden-xs hidden-sm"><i class="icon icon-map-marker"></i> Shenzhen, China</small>
      </div>
      
      <div class="search" id="search-form-wrap">

    <form class="search-form sidebar-form">
        <div class="input-group">
            <input type="text" class="search-form-input form-control" placeholder="æœç´¢" />
            <span class="input-group-btn">
                <button type="submit" class="search-form-submit btn btn-flat" onclick="return false;"><i class="icon icon-search"></i></button>
            </span>
        </div>
    </form>
    <div class="ins-search">
  <div class="ins-search-mask"></div>
  <div class="ins-search-container">
    <div class="ins-input-wrapper">
      <input type="text" class="ins-search-input" placeholder="æƒ³è¦æŸ¥æ‰¾ä»€ä¹ˆ..." x-webkit-speech />
      <button type="button" class="close ins-close ins-selectable" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">Ã—</span></button>
    </div>
    <div class="ins-section-wrapper">
      <div class="ins-section-container"></div>
    </div>
  </div>
</div>


</div>
      <button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target="#main-navbar" aria-controls="main-navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
    </div>
    <nav id="main-navbar" class="collapse navbar-collapse" itemscope itemtype="http://schema.org/SiteNavigationElement" role="navigation">
      <ul class="nav navbar-nav main-nav ">
        
        
        <li class="menu-item menu-item-home">
          <a href="/.">
            
            <i class="icon icon-home-fill"></i>
            
            <span class="menu-title">é¦–é¡µ</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-archives">
          <a href="/archives">
            
            <i class="icon icon-archives-fill"></i>
            
            <span class="menu-title">å½’æ¡£</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-categories">
          <a href="/categories">
            
            <i class="icon icon-folder"></i>
            
            <span class="menu-title">åˆ†ç±»</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-tags">
          <a href="/tags">
            
            <i class="icon icon-tags"></i>
            
            <span class="menu-title">æ ‡ç­¾</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-about">
          <a href="/about">
            
            <i class="icon icon-cup-fill"></i>
            
            <span class="menu-title">å…³äº</span>
          </a>
        </li>
        
      </ul>
      
	
    <ul class="social-links">
    	
        <li><a href="https://github.com/ownwell" target="_blank" title="Github" data-toggle=tooltip data-placement=top><i class="icon icon-github"></i></a></li>
        
        <li><a href="/atom.xml" target="_blank" title="Rss" data-toggle=tooltip data-placement=top><i class="icon icon-rss"></i></a></li>
        
    </ul>

    </nav>
  </div>
</header>

  
    <aside class="sidebar" itemscope itemtype="http://schema.org/WPSideBar">
  <div class="slimContent">
    
      <div class="widget">
    <h3 class="widget-title">å…¬å‘Š</h3>
    <div class="widget-body">
        <div id="board">
            <div class="content">
                <p>æ¬¢è¿äº¤æµä¸åˆ†äº«ç»éªŒ!</p>
            </div>
        </div>
    </div>
</div>

    
      
  <div class="widget">
    <h3 class="widget-title">åˆ†ç±»</h3>
    <div class="widget-body">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Android/">Android</a><span class="category-list-count">35</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Flutter/">Flutter</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Java/">Java</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Kotlin/">Kotlin</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/">Python</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Tools/">Tools</a><span class="category-list-count">14</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/æ•°æ®åˆ†æ/">æ•°æ®åˆ†æ</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/ç”Ÿæ´»/">ç”Ÿæ´»</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/ç®—æ³•/">ç®—æ³•</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/ç¼–ç¨‹/">ç¼–ç¨‹</a><span class="category-list-count">8</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/è¯»ä¹¦/">è¯»ä¹¦</a><span class="category-list-count">1</span></li></ul>
    </div>
  </div>


    
      
  <div class="widget">
    <h3 class="widget-title">æ ‡ç­¾</h3>
    <div class="widget-body">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/2018/">2018</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/AI/">AI</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Android/">Android</a><span class="tag-list-count">20</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Androidæºç /">Androidæºç </a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Androidçƒ­ä¿®å¤/">Androidçƒ­ä¿®å¤</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Androidè¿›é˜¶/">Androidè¿›é˜¶</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Animations/">Animations</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CodeStyle/">CodeStyle</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Flutter/">Flutter</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Git/">Git</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Google/">Google</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Gradle/">Gradle</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/IDEA/">IDEA</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JCenter/">JCenter</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JNIå¼€å‘/">JNIå¼€å‘</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Java/">Java</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JavaEE/">JavaEE</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Jenkins/">Jenkins</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Kotlin/">Kotlin</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Mac/">Mac</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Material/">Material</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Python/">Python</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Realm/">Realm</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Ruby/">Ruby</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Sublime-Text/">Sublime Text</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Tomcat/">Tomcat</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Tools/">Tools</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Transition/">Transition</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/UI/">UI</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/VS-code/">VS code</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/View/">View</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hot-fix/">hot-fix</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/pandas/">pandas</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/python/">python</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/åŠ¨æ€ä»£ç†/">åŠ¨æ€ä»£ç†</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/å•ä¾‹/">å•ä¾‹</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/å¤šæ¸ é“/">å¤šæ¸ é“</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/æŠ“åŒ…/">æŠ“åŒ…</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/æ’ä»¶åŒ–/">æ’ä»¶åŒ–</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/æœåŠ¡å™¨/">æœåŠ¡å™¨</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/æ³¨è§£/">æ³¨è§£</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/çƒ­ä¿®å¤/">çƒ­ä¿®å¤</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ç”Ÿæ´»/">ç”Ÿæ´»</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ç®—æ³•/">ç®—æ³•</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ç¼–ç¨‹/">ç¼–ç¨‹</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ç¿»è¯‘/">ç¿»è¯‘</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/è®¾è®¡æ¨¡å¼/">è®¾è®¡æ¨¡å¼</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/è¯‘æ–‡/">è¯‘æ–‡</a><span class="tag-list-count">1</span></li></ul>
    </div>
  </div>


    
      
  <div class="widget">
    <h3 class="widget-title">æ ‡ç­¾äº‘</h3>
    <div class="widget-body tagcloud">
      <a href="/tags/2018/" style="font-size: 13px;">2018</a> <a href="/tags/AI/" style="font-size: 13px;">AI</a> <a href="/tags/Android/" style="font-size: 14px;">Android</a> <a href="/tags/Androidæºç /" style="font-size: 13px;">Androidæºç </a> <a href="/tags/Androidçƒ­ä¿®å¤/" style="font-size: 13px;">Androidçƒ­ä¿®å¤</a> <a href="/tags/Androidè¿›é˜¶/" style="font-size: 13.5px;">Androidè¿›é˜¶</a> <a href="/tags/Animations/" style="font-size: 13px;">Animations</a> <a href="/tags/CodeStyle/" style="font-size: 13px;">CodeStyle</a> <a href="/tags/Flutter/" style="font-size: 13.17px;">Flutter</a> <a href="/tags/Git/" style="font-size: 13.17px;">Git</a> <a href="/tags/Google/" style="font-size: 13px;">Google</a> <a href="/tags/Gradle/" style="font-size: 13.33px;">Gradle</a> <a href="/tags/IDEA/" style="font-size: 13px;">IDEA</a> <a href="/tags/JCenter/" style="font-size: 13px;">JCenter</a> <a href="/tags/JNIå¼€å‘/" style="font-size: 13.17px;">JNIå¼€å‘</a> <a href="/tags/Java/" style="font-size: 13.33px;">Java</a> <a href="/tags/JavaEE/" style="font-size: 13px;">JavaEE</a> <a href="/tags/Jenkins/" style="font-size: 13px;">Jenkins</a> <a href="/tags/Kotlin/" style="font-size: 13.33px;">Kotlin</a> <a href="/tags/Mac/" style="font-size: 13px;">Mac</a> <a href="/tags/Material/" style="font-size: 13px;">Material</a> <a href="/tags/Python/" style="font-size: 13.83px;">Python</a> <a href="/tags/Realm/" style="font-size: 13px;">Realm</a> <a href="/tags/Ruby/" style="font-size: 13px;">Ruby</a> <a href="/tags/Sublime-Text/" style="font-size: 13px;">Sublime Text</a> <a href="/tags/Tomcat/" style="font-size: 13px;">Tomcat</a> <a href="/tags/Tools/" style="font-size: 13.67px;">Tools</a> <a href="/tags/Transition/" style="font-size: 13px;">Transition</a> <a href="/tags/UI/" style="font-size: 13px;">UI</a> <a href="/tags/VS-code/" style="font-size: 13px;">VS code</a> <a href="/tags/View/" style="font-size: 13px;">View</a> <a href="/tags/hot-fix/" style="font-size: 13px;">hot-fix</a> <a href="/tags/pandas/" style="font-size: 13px;">pandas</a> <a href="/tags/python/" style="font-size: 13px;">python</a> <a href="/tags/åŠ¨æ€ä»£ç†/" style="font-size: 13px;">åŠ¨æ€ä»£ç†</a> <a href="/tags/å•ä¾‹/" style="font-size: 13px;">å•ä¾‹</a> <a href="/tags/å¤šæ¸ é“/" style="font-size: 13px;">å¤šæ¸ é“</a> <a href="/tags/æŠ“åŒ…/" style="font-size: 13px;">æŠ“åŒ…</a> <a href="/tags/æ’ä»¶åŒ–/" style="font-size: 13px;">æ’ä»¶åŒ–</a> <a href="/tags/æœåŠ¡å™¨/" style="font-size: 13px;">æœåŠ¡å™¨</a> <a href="/tags/æ³¨è§£/" style="font-size: 13px;">æ³¨è§£</a> <a href="/tags/çƒ­ä¿®å¤/" style="font-size: 13px;">çƒ­ä¿®å¤</a> <a href="/tags/ç”Ÿæ´»/" style="font-size: 13.17px;">ç”Ÿæ´»</a> <a href="/tags/ç®—æ³•/" style="font-size: 13.33px;">ç®—æ³•</a> <a href="/tags/ç¼–ç¨‹/" style="font-size: 13px;">ç¼–ç¨‹</a> <a href="/tags/ç¿»è¯‘/" style="font-size: 13px;">ç¿»è¯‘</a> <a href="/tags/è®¾è®¡æ¨¡å¼/" style="font-size: 13px;">è®¾è®¡æ¨¡å¼</a> <a href="/tags/è¯‘æ–‡/" style="font-size: 13px;">è¯‘æ–‡</a>
    </div>
  </div>

    
      
  <div class="widget">
    <h3 class="widget-title">å½’æ¡£</h3>
    <div class="widget-body">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">å…­æœˆ 2019</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">äº”æœˆ 2019</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">åäºŒæœˆ 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">ä¹æœˆ 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">å…«æœˆ 2018</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">ä¸ƒæœˆ 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">å…­æœˆ 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">äº”æœˆ 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">å››æœˆ 2018</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">ä¸‰æœˆ 2018</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">äºŒæœˆ 2018</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">åäºŒæœˆ 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">åæœˆ 2017</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">å…«æœˆ 2017</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">ä¸ƒæœˆ 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">äº”æœˆ 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">å››æœˆ 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/12/">åäºŒæœˆ 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/09/">ä¹æœˆ 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/08/">å…«æœˆ 2016</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/07/">ä¸ƒæœˆ 2016</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/06/">å…­æœˆ 2016</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/05/">äº”æœˆ 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/04/">å››æœˆ 2016</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/03/">ä¸‰æœˆ 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/02/">äºŒæœˆ 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/12/">åäºŒæœˆ 2015</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/09/">ä¹æœˆ 2015</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/08/">å…«æœˆ 2015</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/07/">ä¸ƒæœˆ 2015</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/06/">å…­æœˆ 2015</a><span class="archive-list-count">8</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/05/">äº”æœˆ 2015</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/04/">å››æœˆ 2015</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/01/">ä¸€æœˆ 2015</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/11/">åä¸€æœˆ 2014</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/10/">åæœˆ 2014</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/09/">ä¹æœˆ 2014</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/07/">ä¸ƒæœˆ 2014</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/06/">å…­æœˆ 2014</a><span class="archive-list-count">1</span></li></ul>
    </div>
  </div>


    
      
  <div class="widget">
    <h3 class="widget-title">æœ€æ–°æ–‡ç« </h3>
    <div class="widget-body">
      <ul class="recent-post-list list-unstyled no-thumbnail">
        
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/Android/">Android</a>
              </p>
              <p class="item-title">
                <a href="/2019/06/27/æ’ä»¶åŒ–ä¹‹HookActivity/" class="title">æ’ä»¶åŒ–ä¹‹Hook Activity</a>
              </p>
              <p class="item-date">
                <time datetime="2019-06-27T14:11:25.000Z" itemprop="datePublished">2019-06-27</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/Tools/">Tools</a>
              </p>
              <p class="item-title">
                <a href="/2019/06/20/2019-06-20-alfredæ’ä»¶å¼€å‘/" class="title">alfredæ’ä»¶å¼€å‘-å°†githubä½œä¸ºå›¾åºŠ</a>
              </p>
              <p class="item-date">
                <time datetime="2019-06-20T15:27:11.000Z" itemprop="datePublished">2019-06-20</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/Flutter/">Flutter</a>
              </p>
              <p class="item-title">
                <a href="/2019/05/16/flutter-learning-2/" class="title">Flutter è¯·æ±‚ç½‘ç»œæ•°æ®å’Œåˆ—è¡¨å±•ç¤º</a>
              </p>
              <p class="item-date">
                <time datetime="2019-05-16T10:53:58.000Z" itemprop="datePublished">2019-05-16</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/Flutter/">Flutter</a>
              </p>
              <p class="item-title">
                <a href="/2019/05/12/Flutter-ä»ä¸€ä¸ªdemoå¼€å§‹/" class="title">Flutter ä»ä¸€ä¸ªdemoå¼€å§‹</a>
              </p>
              <p class="item-date">
                <time datetime="2019-05-12T06:31:02.000Z" itemprop="datePublished">2019-05-12</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/Android/">Android</a>
              </p>
              <p class="item-title">
                <a href="/2018/12/23/Aspectå’Œaopæ‰“ç‚¹è°ƒç ”/" class="title">Aspectå’ŒAOPæ‰“ç‚¹è°ƒç ”</a>
              </p>
              <p class="item-date">
                <time datetime="2018-12-23T10:57:56.000Z" itemprop="datePublished">2018-12-23</time>
              </p>
            </div>
          </li>
          
      </ul>
    </div>
  </div>
  

    
  </div>
</aside>

  
  
<main class="main" role="main">
  <div class="content">
  <article id="post-android-better-progurad" class="article article-type-post" itemscope itemtype="http://schema.org/BlogPosting">
    
    <div class="article-header">
      
        
  
    <h1 class="article-title" itemprop="name">
      ã€Androidè¿›é˜¶ã€‘Androidä¸­ä½¿ç”¨ProGuard
    </h1>
  

      
      <div class="article-meta">
        <span class="article-date">
    <i class="icon icon-calendar-check"></i>
	<a href="/2017/10/30/android-better-progurad/" class="article-date">
	  <time datetime="2017-10-30T14:08:30.000Z" itemprop="datePublished">2017-10-30</time>
	</a>
</span>
        
  <span class="article-category">
    <i class="icon icon-folder"></i>
    <a class="article-category-link" href="/categories/Android/">Android</a>
  </span>

        
  <span class="article-tag">
    <i class="icon icon-tags"></i>
	<a class="article-tag-link" href="/tags/Androidè¿›é˜¶/">Androidè¿›é˜¶</a>
  </span>


        

        <span class="post-comment"><i class="icon icon-comment"></i> <a href="/2017/10/30/android-better-progurad/#comments" class="article-comment-link">è¯„è®º</a></span>
        
      </div>
    </div>
    <div class="article-entry marked-body" itemprop="articleBody">
      
        <p>å¯¹äºä¸€ä¸ªæœ‰ç»éªŒçš„ç¨‹åºå‘˜ï¼ŒProGuardå¤§å®¶ä¸€å®šä¸é™Œç”Ÿï¼Œæœ‰äººè¯´ä»–æ˜¯æ··æ·†ï¼Œæˆ‘å¿…é¡»çº æ­£ï¼Œæ··æ·†åªæ˜¯ProGuardçš„ä¸€ä¸ªè¿‡ç¨‹(æˆ‘ä¸ä¼šç§°ProGuardä¸ºæ··æ·†ï¼ŒProGuardå°±æ˜¯ProGuardï¼Œè°å†è¯´ProGuardæ‰æ˜¯çœŸæ­£çš„æ··æ·†è§†å¬ï¼Œä¸‹é¢æœ‰è§£é‡Š).<br>ProGuardå…¶å®ä¸æ˜¯Androidç‰¹æœ‰çš„å·¥å…·ï¼Œä»–å…¶å®æ›´æ—©é€‚ç”¨äºjavaé¡¹ç›®ä¸­ï¼Œä¼˜åŒ–javaä»£ç ï¼Œä¿è¯javaç¨‹åºçš„å®‰å…¨æ€§ã€‚ç”±äºAndroidç¨‹åºå¤§éƒ¨åˆ†ä¹Ÿæ˜¯æ˜¯Javaä»£ç ï¼Œæ‰€ä»¥ProGuardæˆä¸ºAndroidå·¥ç¨‹å¸ˆå¿…ä¿®çš„ä¸€é—¨è¯¾ç¨‹ã€‚</p>
<a id="more"></a>
<h1><span id="ç®€å•è®¤è¯†proguard">ç®€å•è®¤è¯†ProGuard</span></h1><p>åœ¨å¹³æ—¶å¼€å‘ä¸­ï¼Œæˆ‘ä»¬çš„é¡¹ç›®æ˜¯ProGuardå¼€å…³é»˜è®¤æ˜¯æ˜¯å…³çš„ï¼Œæˆ‘ä»¬é€šè¿‡å¦‚ä¸‹ä»£ç æ‰“å¼€ProGuardï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">android &#123;</span><br><span class="line"></span><br><span class="line">    buildTypes &#123;</span><br><span class="line">        release &#123;</span><br><span class="line">            minifyEnabled <span class="keyword">true</span></span><br><span class="line">            <span class="function">proguardFiles <span class="title">getDefaultProguardFile</span><span class="params">(<span class="string">'proguard-android.txt'</span>)</span>ï¼Œ  'project.pro'</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">        &#125;</span></span><br><span class="line"><span class="function">    &#125;</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">&#125;</span></span><br></pre></td></tr></table></figure>

<p>å…ˆè§£é‡Šä¸‹æˆ‘ä»¬å¯ä»¥é€šè¿‡<code>minifyEnabled</code>æ‰“å¼€å¼€å…³ï¼Œé€šè¿‡<code>proguardFiles</code>æŒ‡å®šæˆ‘ä»¬çš„<code>ProGuard Rule</code>çš„å¤šä¸ªæ–‡ä»¶ï¼ˆåé¢ä¼šä»‹ç»ï¼‰ã€‚æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨<code>proguardFile</code>æŒ‡å®šä¸€ä¸ªä¸€ä¸ªæ–‡ä»¶ï¼Œå…¶ä¸­<code>proguard-android.txt</code>å®é™…ä¸Šæ˜¯æˆ‘ä»¬çš„<code>{Android Sdk path}/tools/proguard/</code>ä¸‹<code>proguard-android.txt</code>ã€‚è¿™æ ·å°±å¯ä»¥ç®€å•ä½¿ç”¨æˆ‘ä»¬çš„ProGuardï¼Œå½“ç„¶äº†å¯¹åº”çš„<code>ProGuard</code>ä¹Ÿæ˜¯æˆ‘ä»¬SDKä¸‹<code>proguard-android.txt</code></p>
<h1><span id="ä»€ä¹ˆæ˜¯proguard">ä»€ä¹ˆæ˜¯ProGuard</span></h1><p>é‚£ä¸ªç©¶ç«Ÿä»€ä¹ˆæ˜¯ProGuardå‘¢ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹ä¸‹<code>{Android Sdk path}/tools/proguard/</code>ä¸‹çš„ProGuardçš„docæ–‡æ¡£ï¼š</p>
<blockquote>
<p>ProGuard is a free Java class file shrinker, optimizer, obfuscator, and preverifier. It detects and removes unused classes, fields, methods, and attributes. It optimizes bytecode and removes unused instructions. It renames the remaining classes, fields, and methods using short meaningless names. Finally, it preverifies the processed code for Java 6 or for Java Micro Edition.</p>
</blockquote>
<p>å¤§æ¦‚æ„æ€å°±æ˜¯ï¼š ProGuardæ˜¯ä¸€ä¸ªå…è´¹çš„å¯ä»¥å°†java classæ–‡ä»¶è¿›è¡Œå‹ç¼©ï¼Œä¼˜åŒ–ï¼Œæ··æ·†ï¼Œé¢„æ ¡éªŒçš„å·¥å…·ã€‚å®ƒèƒ½åˆ é™¤æ— ç”¨çš„ç±»ï¼Œå˜é‡ã€æ–¹æ³•ä»¥åŠå±æ€§ã€‚å®ƒèƒ½ä¼˜åŒ–å­—èŠ‚ç ï¼Œç§»é™¤æ— ç”¨çš„æŒ‡ä»¤ï¼ŒåŒæ—¶å®ƒå°†ï¼ˆå‹ç¼©åï¼‰ä¿ç•™çš„ç±»ï¼Œå˜é‡å’Œæ–¹æ³•ä½¿ç”¨æ— æ„ä¹‰çš„æ®µå­—ç¬¦æ¥é‡å‘½åï¼Œè€Œåè¿˜èƒ½åœ¨å¯¹åº”çš„javaç‰ˆæœ¬ä¸Šè¿›è¡Œé¢„æ ¡éªŒè¿™äº›å¤„ç†åçš„codeã€‚</p>
<p>## ProGuardå››å…„å¼Ÿ</p>
<p><img src="http://7xwwa2.com1.z0.glb.clouddn.com/proguard_intro.png" alt></p>
<p>å¦‚ä¸Šå›¾ï¼ŒProGuardå®é™…ä¸Šå››å¤§å¤©ç‹ï¼ˆé­”å®¶å››å°†ï¼‰ï¼Œä»–ä»¬åˆ†åˆ«æ˜¯å‹ç¼©ï¼ˆshrinkingï¼‰ï¼Œä¼˜åŒ–ï¼ˆoptimizationï¼‰ï¼Œæ··æ·†ï¼ˆobfuscationï¼‰å’Œé¢„æ ¡éªŒï¼ˆpreverificationï¼‰ï¼Œä¸€ä¸ªclasså’Œå››å¤§å¤©ç‹ç¢°è¿‡é¢æ‰å¯ä»¥åˆ°æœ€åçš„å—å¤©é—¨ï¼ˆã€‚</p>
<p>å‹ç¼©(shrinking)ï¼šæ£€æµ‹å¹¶ç§»é™¤ä»£ç ä¸­æ— ç”¨çš„ç±»ã€å­—æ®µã€æ–¹æ³•å’Œç‰¹æ€§ï¼ˆAttributeï¼‰<br>ä¼˜åŒ–(optimization)ï¼šå¯¹å­—èŠ‚ç è¿›è¡Œä¼˜åŒ–ï¼Œç§»é™¤æ— ç”¨çš„æŒ‡ä»¤<br>æ··æ·†(obfuscation)ï¼šä½¿ç”¨aï¼Œbï¼Œcï¼Œdè¿™æ ·ç®€çŸ­è€Œæ— æ„ä¹‰çš„åç§°ï¼Œå¯¹ç±»ã€å­—æ®µå’Œæ–¹æ³•è¿›è¡Œé‡å‘½å<br>é¢„æ£€(preverification)ï¼šåœ¨Javaå¹³å°ä¸Šå¯¹å¤„ç†åçš„ä»£ç è¿›è¡Œé¢„æ£€ï¼Œç¡®ä¿åŠ è½½çš„classæ–‡ä»¶æ˜¯å¯æ‰§è¡Œçš„ã€‚<br>å¯¹äºä¸€ä¸ªclassæ–‡ä»¶ä¹Ÿè¦ç»å†å¦‚ä¸‹å››æ­¥ï¼š</p>
<ol>
<li><p>ä¼šé¦–å…ˆæ£€æŸ¥è¿™ä¸ªç±»æ˜¯å¦æœ‰åœ°æ–¹ç”¨åˆ°ï¼ˆæ²¡ç”¨åˆ°ç›´æ¥åˆ é™¤ï¼‰ï¼Œè¿™ä¸ªç±»é‡Œé¢çš„æ–¹æ³•æˆ–è€…å˜é‡å“ªäº›æˆ‘ä»¬æ²¡ç”¨åˆ°ï¼Œæ²¡ç”¨åˆ°å°±ç›´æ¥åˆ é™¤</p>
</li>
<li><p>è‹¥ç±»æ²¡æœ‰è¢«åˆ é™¤ï¼Œæ£€æŸ¥classæ–‡ä»¶çš„æ— ç”¨æŒ‡ä»¤å’Œå­—èŠ‚</p>
</li>
<li><p>å°†ä»ç„¶ä¿ç•™çš„ç±»ï¼Œæ··æ·†classååŠå†…éƒ¨çš„å˜é‡å’Œæ–¹æ³•å</p>
</li>
<li><p>åœ¨å¯¹åº”çš„javaçš„å¹³å°ä¸Šé¢„æ ¡éªŒè¿™ä¸ªclassæ˜¯å¦å®Œæ•´æœ‰æ•ˆ<br>è¿™ä¸ªæ˜¯é»˜è®¤çš„æƒ…å†µä¸‹ç»å†ç€å››ä¸ªæ­¥éª¤ï¼Œè¿™ä¸ªä¹Ÿä¸æ˜¯å¿…é¡»çš„ã€‚å¾ˆåƒç›®å‰ä¸­å›½çš„å¤§ç¯å¢ƒï¼Œä½ å¯ä»¥é€šè¿‡äººæƒ…æ¥é¿å…ä¸å¿…è¦çš„éº»çƒ¦ï¼Œè¿™å››å¤§å¤©ç‹ä¹Ÿä¸ä¾‹å¤–ã€‚<br>ä¾‹å¦‚æˆ‘å†™ä¸ªSDKï¼Œé‡Œé¢å°è£…å¾ˆå¤šjavaæ–‡ä»¶ï¼Œæœ€åç±»åº“ä¸ºç¬¬ä¸‰æ–¹æœåŠ¡ï¼Œæœ€åæˆ‘æ‰“å‡ºä¸€ä¸ªjarï¼Œè¿™ä¸ªjaræˆ‘æœŸæœ›ç”¨æ··æ·†ã€‚ä¸¥æ ¼æŒ‰ç…§æ··æ·†çš„å››å¤§å¤©ç‹çš„è§„åˆ™ï¼Œå°±ä¼šé‡åˆ°å¾ˆå¤šé—®é¢˜ï¼š</p>
</li>
<li><p>ä¿ç•™ä¸€äº›ç±»ã€‚é‡Œé¢çš„ç±»å¥½å¯¹å¤–ä½¿ç”¨çš„ï¼Œä¸ä¼šè¢«SDKå†…éƒ¨ä½¿ç”¨ï¼ŒæŒ‰ç…§æ··æ·†çš„å››å¤§å¤©ç‹çš„è§„åˆ™ï¼Œç¬¬ä¸€æ­¥ç›´æ¥å°±è¢«å¹²æ‰äº†ï¼Œæ‰€æœ‰å°±å¾—èµ°ç‚¹åé—¨<br>2. æŸäº›classï¼Œmethodæˆ–è€…å˜é‡ï¼Œæˆ‘æœŸæœ›ä¸è¦æ··æ·†ã€‚ä¾‹å¦‚ä¸€ä¸ªæ”¯ä»˜çš„classä¸ºPaySDKï¼Œé‡Œé¢çš„æ–¹æ³•ä¹Ÿå°½é‡æ˜¯aliPayï¼ŒwxPayï¼Œåç§°æœ‰æ„ä¹‰ï¼Œä½¿ç”¨æ··æ·†åPaySDKæˆäº†aï¼Œæ–¹æ³•åä¹Ÿæ˜¯æ— æ„ä¹‰çš„aï¼Œbï¼Œè¿™å¯¹ä½¿ç”¨sdkçš„å¼€å‘è€…æ˜¯ä¸å‹å¥½çš„ã€‚<br>ä¸ºäº†é¿å…è¿™ä¸ªé—®é¢˜ï¼Œå°±éœ€è¦æˆ‘ä»¬è‡ªå·±æ¥åˆ¶å®šä¸€ä¸ªè§„åˆ™ï¼Œåœ¨å»å—å¤©é—¨çš„è·¯ä¸Šï¼Œä½ åªç®¡è¿™ä¸ªè§„åˆ™æ¥ç»™å››å¤§å¤©ç‹çœ‹ï¼Œå‘Šè¯‰æŒ‰ç…§æˆ‘ä»¬çš„è§„åˆ™èµ°ï¼Œè€Œè¿™ä¸ªè§„åˆ™å°±æ˜¯<code>ProGuard Rule</code>æˆ‘ä»¬åˆšæ‰é…ç½®çš„<code>proguardFiles</code>,å¯¹äºæˆ‘ä»¬æ¥è¯´å†™ä¸€ä¸ª<code>ProGuard Rule</code>æ˜¯ç›®å‰æ¯”è¾ƒä¸å¤ªå¥½å†™çš„ä¸€ä»¶äº‹ã€‚</p>
</li>
</ol>
<h1><span id="proguard-rule">ProGuard Rule</span></h1><p>åœ¨ç¬¬ä¸€éƒ¨åˆ†æˆ‘ä»¬æåˆ°åœ¨ä¸»é¡¹ç›®ä¸‹çš„build.gradleé…ç½®æˆ‘ä»¬çš„<code>ProGuard Rule</code>,å…¶ä¸­Googleå®˜æ–¹æä¾›äº†ä¸€ä¸ªç®€å•çš„<a href="https://gist.github.com/ownwell/373860e6468671e8e65c8b9eb849f7c2#file-proguard-android-txt" target="_blank" rel="noopener">åŸºç¡€ç¤ºä¾‹</a>ï¼š<br>æˆ‘ä»¬å°±æ¥å¤§è‡´çœ‹ä¸‹ä»–ä»¬æ˜¯åˆ†åˆ«çš„ä½œç”¨ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># dont ä¸€èˆ¬æ˜¯ä»£è¡¨do notä¸è¦çš„æ„æ€ï¼Œè¿™ä¸ªå°±è¡¨ç¤ºæ··æ·†çš„å­—ç¬¦ä¸é€‚ç”¨å¤§å°å†™æ··åˆçš„ï¼ˆå¦‚Abï¼‰</span><br><span class="line">-dontusemixedcaseclassnames</span><br><span class="line">-dontskipnonpubliclibraryclasses</span><br></pre></td></tr></table></figure>

<p>è¿™ä¸ªæ˜¯Googleå»ºè®®çš„ï¼Œè‹¥ä½ éä½¿ç”¨å¤§å°æ··åˆï¼Œæ²¡äººä¼šæ‹¦ä½ ã€‚ğŸ˜†ã€‚<br><br><br></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># ä¸ä¼˜åŒ–ï¼Œdexä¸æ˜¯è¿è¡Œåœ¨JVMä¸Šçš„ï¼Œå½“ç„¶äº†ä¹Ÿä¸åšé¢„æ ¡éªŒ</span><br><span class="line">-dontoptimize</span><br><span class="line">-dontpreverify</span><br></pre></td></tr></table></figure>

<p>è¿™ä¸ªæ˜¯é’ˆå¯¹androidçš„å¼€å‘è€Œè¨€ï¼Œä¸è¿‡ä½ è¦ä½¿ç”¨ä¼˜åŒ–ï¼Œå°½é‡ä½¿ç”¨<code>{Android Sdk path}/tools/proguard/</code>ä¸‹çš„<code>proguard-android-optimize.txt</code>æ–‡ä»¶ã€‚<br><br><br></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># æ³¨è§£ç›¸å…³çš„</span><br><span class="line">-keepattributes *Annotation*</span><br><span class="line"># çŒœæµ‹æ˜¯GoogleæœåŠ¡ç›¸å…³çš„</span><br><span class="line">-keep <span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">com</span>.<span class="title">google</span>.<span class="title">vending</span>.<span class="title">licensing</span>.<span class="title">ILicensingService</span></span></span><br><span class="line"><span class="class">-<span class="title">keep</span> <span class="title">public</span> <span class="title">class</span> <span class="title">com</span>.<span class="title">android</span>.<span class="title">vending</span>.<span class="title">licensing</span>.<span class="title">ILicensingService</span></span></span><br></pre></td></tr></table></figure>

<p>å¯ä»¥çœ‹åˆ°æœ‰ä¸ª<code>keepattributes</code>è‚¯å®šæ˜¯ä¿ç•™ç±»çš„å±æ€§å•¦ï¼Œè¿˜æœ‰ä¸ª<code>-keep public class ç±»å</code>è¿™ä¸ªè‚¯å®šå°±æ˜¯ä¸ºäº†ä¿ç•™è¿™ä¸ªç±»ä¸è¢«å‹ç¼©æˆ–è€…æ··æ·†ã€‚<br><br><br></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">-keepclasseswithmembernames <span class="class"><span class="keyword">class</span> * </span>&#123;</span><br><span class="line">    <span class="keyword">native</span> &lt;methods&gt;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™ä¸ª<code>-keepclasseswithmembernames public class ç±»å</code>ä¸éš¾è§£é‡Šå§ï¼Œå­—é¢æ„æ€æ˜¯ä¿ç•™classå’Œç±»çš„æˆå‘˜ï¼Œå¹¶ä¸”è¿™ä¸ªç±»æœ‰ä¸ªnativeæ–¹æ³•ã€‚<br><br><br></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-keepclassmembers <span class="keyword">public</span> <span class="class"><span class="keyword">class</span> * <span class="keyword">extends</span> <span class="title">android</span>.<span class="title">view</span>.<span class="title">View</span> </span>&#123;</span><br><span class="line">   <span class="keyword">void</span> set*(***);</span><br><span class="line">   *** get*();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™ä¸ªå°±ä»£è¡¨ä¿ç•™ç±»ä¸­çš„getter/setteræ–¹æ³•ï¼Œè¿™ä¸ªç±»æ˜¯ç»§æ‰¿è‡ª<code>android.view.View</code><br><br><br></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">-keepclassmembers <span class="class"><span class="keyword">class</span> **.<span class="title">R</span>$* </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;fields&gt;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™ä¸ªè‚¯å®šæ˜¯ä¿ç•™æˆ‘ä»¬èµ„æºIDå¯¹åº”çš„Ræ–‡ä»¶ä¸­æ‰€æœ‰çš„é™æ€å˜é‡ã€‚<br><br><br></p>
<p>çœ‹äº†è¿™ä¹ˆå¤šæˆ‘ä»¬ä¼šäº§ç”Ÿç–‘é—®ï¼škeepã€keepclassmembersç­‰è¿™äº›keepå¼€å¤´çš„æœ‰å“ªäº›ï¼ŒåŒºåˆ«æ˜¯ä»€ä¹ˆï¼Œæ€ä¹ˆé…ç½®å‚æ•°ï¼Œclassï¼Œmethodè¿™äº›æ€ä¹ˆå†™ï¼Œ*<em>ä»¥åŠ</em>åˆ†åˆ«ä»£è¡¨ä»€ä¹ˆï¼Œå°±è®©æˆ‘ä»¬æ¥ä¸€èµ·æ¢ç´¢<code>ProGuard Rule</code>çš„å†™æ³•å§ã€‚</p>
<h2><span id="keep-options">Keep options</span></h2><p>keepç›®å‰å¸¸è§çš„å°±6å…­ç§ï¼š</p>
<ol>
<li>-keep [,modifier,â€¦] class_specification </li>
<li>-keepclassmembers [,modifier,â€¦] class_specification   </li>
<li>-keepclasseswithmembers [,modifier,â€¦] class_specification </li>
<li>-keepnames class_specification åœ¨å‹ç¼©ï¼ˆåˆ é™¤æ— ç”¨çš„ç±»å’Œæˆå‘˜ï¼‰åä¿ç•™ä¸‹æ¥çš„ç±»å’Œå…¶æˆå‘˜ä¸­ï¼Œé˜»æ­¢ç±»å’Œç±»çš„æˆå‘˜(é‡Œé¢çš„å˜é‡å’Œæ–¹æ³•éƒ½æ˜¯æˆå‘˜)æ··æ·†</li>
<li>-keepclassmembernames class_specification åœ¨å‹ç¼©åä¿ç•™ä¸‹æ¥çš„ç±»ä¸­ï¼Œé˜»æ­¢ç±»çš„æˆå‘˜è¢«æ··æ·†</li>
<li>-keepclasseswithmembernames class_specification</li>
</ol>
<h3><span id="æœ‰æ— nameçš„keep">æœ‰æ— nameçš„keep*</span></h3><p>å¯ä»¥çœ‹åˆ°å‰ä¸‰ä¸ªå®é™…ä¸Šæ˜¯æ¯”åä¸‰ä¸ªå°‘äº†nameçš„ï¼Œä½†æ˜¯æ„ä¹‰å´å¤§ä¸åŒå•Šã€‚å°±ä»¥keepå’ŒkeepNameä¸ºä¾‹å§ï¼Œ<br>keepæ˜¯é˜»æ­¢ç±»å’Œç±»çš„å˜é‡ï¼ˆå®é™…ä¸Šå°±æ˜¯ç±»ä¸­çš„æ–¹æ³•å’Œå˜é‡ï¼‰è¢«å‹ç¼©å’Œæ··æ·†ï¼Œè€Œkeepnamesé‚£ä¹ˆåˆ™æ˜¯åœ¨å‹ç¼©åï¼Œé˜²æ­¢ç±»å’Œç±»çš„æˆå‘˜è¢«æ··æ·†ã€‚æ¢å¥è¯è¯´ï¼Œkeepåœ¨å‹ç¼©ç¬¬ä¸€é“å¤§é—¨æ—¶ï¼Œå°±å·²ç»ç”Ÿæ•ˆï¼Œå¯ä»¥é¿å…è¢«å‹ç¼©æ‰ï¼Œå³ä½¿è¿™ä¸ªç±»æˆ–è€…æˆå‘˜æ²¡æœ‰è¢«ç”¨åˆ°ä¹Ÿä¸ä¼šè¢«ç§»é™¤ï¼Œè€Œkeepnamesåˆ™æ˜¯åœ¨å‹ç¼©åï¼Œä»ä¿ç•™çš„ç±»ä¸­æ¥çœ‹å“ªäº›ç±»å’Œæˆå‘˜ä¸èƒ½è¢«æ··æ·†ï¼Œæ˜¯åœ¨å‹ç¼©åæ‰ç”Ÿæ•ˆã€‚<br>å®˜æ–¹æ–‡æ¡£è§£é‡Šçš„å¾ˆåˆ°ä½ï¼š</p>
<blockquote>
<blockquote>
<blockquote>
<p>Short for -keep,allowshrinking class_specification</p>
</blockquote>
</blockquote>
</blockquote>
<p>å®é™…ä¸ŠåŠ äº†<code>allowshrinking</code>çš„keppå‘½ä»¤ï¼Œå…è®¸å‹ç¼©ã€‚</p>
<table>
<thead>
<tr>
<th>å…³é”®å­—</th>
<th>æ¦‚è¿°</th>
</tr>
</thead>
<tbody><tr>
<td>keep</td>
<td>é˜»æ­¢ç±»å’Œæˆå‘˜è¢«å’Œæ··æ·†</td>
</tr>
<tr>
<td>keepclassmember</td>
<td>é˜»æ­¢ç±»çš„æˆå‘˜è¢«å’Œæ··æ·†</td>
</tr>
<tr>
<td>keepclasseswithmembers</td>
<td>é˜»æ­¢ç±»å’Œç±»ä¸­ç‰¹å®šçš„æˆå‘˜è¢«å‹ç¼©å’Œæ··æ·†</td>
</tr>
<tr>
<td>keepnames</td>
<td>åœ¨å‹ç¼©åä¿ç•™ä¸‹æ¥çš„ç±»å’Œå…¶æˆå‘˜ä¸­ï¼Œé˜»æ­¢ç±»å’Œç±»çš„æˆå‘˜(é‡Œé¢çš„å˜é‡å’Œæ–¹æ³•éƒ½æ˜¯æˆå‘˜)æ··æ·†</td>
</tr>
<tr>
<td>keepclassmembernames</td>
<td>åœ¨å‹ç¼©åä¿ç•™ä¸‹æ¥çš„ç±»å’Œå…¶æˆå‘˜ä¸­ï¼Œé˜»æ­¢ç±»çš„æˆå‘˜è¢«æ··æ·†</td>
</tr>
<tr>
<td>keepclassmembernames</td>
<td>åœ¨å‹ç¼©åä¿ç•™ä¸‹æ¥çš„ç±»å’Œå…¶æˆå‘˜ä¸­ï¼Œé˜»æ­¢ç±»å’Œç±»ä¸­ç‰¹å®šçš„æˆå‘˜è¢«æ··æ·†</td>
</tr>
</tbody></table>
<h3><span id="keep-vs-keepclasseswithmembers">keep VS keepclasseswithmembers</span></h3><p>è¿™ä¸¤ä¸ªéƒ½å¯ä»¥æ³¨é‡Šä¿ç•™ä½classåŠå…¶æˆå‘˜ï¼Œä½†æ˜¯äºŒè€…åŒºåˆ†æœ€å¤§ä¹‹å¤„åœ¨äºï¼škeepåªçœ‹åé¢çš„class æ˜¯ä»€ä¹ˆï¼Œä¸å…³å¿ƒåé¢çš„æˆå‘˜ï¼Œè€Œkeepclasseswithmembersåˆ™æ˜¯æ›´å…³å¿ƒåé¢çš„æ¡ä»¶ã€‚å¹²è¯´å¤ªç¡¬ï¼Œæ¥ç‚¹æ¹¿çš„ã€‚<br>å¦‚ä¸‹è§„åˆ™ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">-keepclasseswithmembernames <span class="class"><span class="keyword">class</span> <span class="title">me</span>.<span class="title">cyning</span>.* </span>&#123;</span><br><span class="line">    <span class="keyword">native</span> &lt;methods&gt;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å½“åœ¨me.cyningåŒ…ä¸‹ï¼Œé‡åˆ°æ–¹æ³•ä½“æœ‰nativeæ–¹æ³•æ—¶ï¼Œåˆ™keepå…¶classï¼ŒåŒæ—¶keepè¿™ä¸ªclassçš„nativeçš„æ–¹æ³•ï¼ˆå…¶ä»–æ— ç”¨æ–¹æ³•å¯èƒ½ä¼šè¢«åˆ æ‰æˆ–è€…æ–¹æ³•åä¼šè¢«æ··æ·†ï¼‰ã€‚</p>
<p>è€Œ</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">-keep <span class="class"><span class="keyword">class</span> <span class="title">me</span>.<span class="title">cyning</span>.* </span>&#123;</span><br><span class="line">    <span class="keyword">native</span> &lt;methods&gt;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åˆ™ä¼šå°†classä¸å‹ç¼©</p>
<p>è¿™ä¸ªkeep*å¯ä»¥ä¿è¯ç±»æˆ–è€…æ–¹æ³•ä¸è¢«å‹ç¼©å’Œæ··æ·†ï¼Œè‡³äºé€‰å“ªä¸ªçœ‹ä½ å¿ƒæƒ…å–½ã€‚</p>
<p>## </p>
<h2><span id="class-specifications">Class specifications</span></h2><p>åœ¨åˆšæ‰ç¤ºä¾‹ä¸­ï¼Œæœ‰ä¸ªä»£ç ç‰‡æ®µï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-keep <span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">com</span>.<span class="title">google</span>.<span class="title">vending</span>.<span class="title">licensing</span>.<span class="title">ILicensingService</span></span></span><br></pre></td></tr></table></figure>

<p>é€šè¿‡è¿™ä¸€å¥<code>keep</code>äº†<code>com.google.vending.licensing.ILicensingService</code>ï¼Œä½†æ˜¯æˆ‘ä»¬è‹¥æ˜¯<code>keep</code>æŸä¸€ç±»æ—¶è€Œä¸åªæ˜¯ä¸€ä¸ªclassæ—¶ï¼Œæˆ‘ä»¬è¦æ€ä¹ˆåŠï¼Ÿ<br>è¿™å°±éœ€è¦æˆ‘ä»¬å°†è¿™ä¸€ç±»çš„åšä¸ªæŠ½è±¡ï¼Œè€Œå°†è¿™æ‰€æœ‰çš„ç±»éƒ½åˆ—å‡ºæ¥ä¸€ä¸ªä¸ªkeepã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥æ¥çœ‹ä¸‹classçš„åŸºæœ¬ç¤ºä¾‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[<span class="meta">@annotationtype</span>] [[!]<span class="keyword">public</span>|<span class="keyword">final</span>|<span class="keyword">abstract</span>|@ ...] [!]<span class="class"><span class="keyword">interface</span>|<span class="title">class</span>|<span class="title">enum</span> <span class="title">classname</span></span></span><br><span class="line">    [extends|implements [@annotationtype] classname]</span><br><span class="line">[&#123;</span><br><span class="line">    [<span class="meta">@annotationtype</span>] [[!]<span class="keyword">public</span>|<span class="keyword">private</span>|<span class="keyword">protected</span>|<span class="keyword">static</span>|<span class="keyword">volatile</span>|<span class="keyword">transient</span> ...] &lt;fields&gt; |</span><br><span class="line">                                                                      (fieldtype fieldname);</span><br><span class="line">    [<span class="meta">@annotationtype</span>] [[!]<span class="keyword">public</span>|<span class="keyword">private</span>|<span class="keyword">protected</span>|<span class="keyword">static</span>|<span class="keyword">synchronized</span>|<span class="keyword">native</span>|<span class="keyword">abstract</span>|<span class="keyword">strictfp</span> ...] &lt;methods&gt; |</span><br><span class="line">                                                                                           &lt;init&gt;(argumenttype,...) |</span><br><span class="line">                                                                                           classname(argumenttype,...) |</span><br><span class="line">                                                                                           (<span class="function">returntype <span class="title">methodname</span><span class="params">(argumenttype,...)</span>)</span>;</span><br><span class="line">    [<span class="meta">@annotationtype</span>] [[!]<span class="keyword">public</span>|<span class="keyword">private</span>|<span class="keyword">protected</span>|<span class="keyword">static</span> ... ] *;</span><br><span class="line">    ...</span><br><span class="line">&#125;]</span><br></pre></td></tr></table></figure>

<p>å…ˆæ¥è§£é‡Šä¸‹[]å§ï¼Œè¿™ä¸ªéƒ½æ˜¯å¯é€‰çš„ï¼Œå¯ä»¥é€‰æ‹©æ— ï¼Œä¹Ÿå¯ä»¥é€‰æ‹©[]é‡Œçš„ä¸€ç§æˆ–è€…å¤šç§ã€‚å¦‚ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@me</span>.cyning.Keep <span class="class"><span class="keyword">class</span> * </span>&#123;</span><br><span class="line">   <span class="keyword">native</span> &lt;methods&gt;() </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å°±è¡¨ç¤ºæ‰€æœ‰åŠ äº†<code>me.cyning.Keep</code>ç±»æ³¨è§£ä¸”æœ‰nativeæ–¹æ³•çš„ç±»ã€‚<br>å°±è®©æˆ‘ä»¬åˆ†åˆ«æ¥çœ‹<code>Class specifications</code></p>
<ol>
<li>annotationtypeå®é™…ä¸Šå°±æ˜¯ç±»æ³¨è§£ï¼Œå¦‚ä¸Šé¢<code>@me.cyning.Keep</code></li>
<li>class/interface/enum å‰å¯ä»¥æ·»åŠ ä¿®é¥°ç¬¦å¦‚publicï¼Œfinalï¼Œabstractç­‰ä¿®é¥°ç¬¦ï¼Œä¹Ÿå¯ä»¥åœ¨è¿™äº›ä¿®é¥°ç¬¦å‰åŠ !è¡¨ç¤ºå¦å®šï¼Œå¦‚!private éç§æœ‰çš„ï¼›åœ¨class/interface/enumå‰ä¹Ÿå¯ä»¥åŠ !è¡¨ç¤ºå¦å®šï¼Œéƒ½æ˜¯é»‘ç§‘æŠ€å•Š</li>
<li>extends/implements åå¯ä»¥æ·»åŠ æˆ‘ä»¬ç»§æ‰¿æˆ–è€…å®ç°çš„ç±»æˆ–è€…æ¥å£ï¼Œä½†æ˜¯è®°ä½ä¸€å®šè¦å†™å…¨åï¼ˆåŒ…å+classnameï¼‰ã€‚</li>
<li><fields> è¡¨ç¤ºé‡Œé¢çš„å˜é‡ï¼Œä»–çš„å‰é¢å¯ä»¥åŠ å…¥ä¿®é¥°ç¬¦<code>public</code>ã€<code>private</code>ã€<code>protected</code>ã€<code>static</code>ã€<code>volatile</code>ã€<code>transient</code>ç­‰ã€‚</fields></li>
<li><methods>å¯ä»¥è¡¨ç¤ºå‡ºäº†æ„é€ å‡½æ•°å¤–çš„æ–¹æ³•ï¼Œå®ƒå‰é¢ä¹Ÿå¯ä»¥åŠ å…¥<code>public</code>ã€<code>private</code>ã€<code>protected</code>ã€<code>static</code>|<code>synchronized</code>ã€<code>native</code>ã€<code>abstract</code>ã€<code>strictfp</code>ç­‰ä¿®é¥°ç¬¦;è€Œ<init>åˆ™è¡¨ç¤ºæ„é€ å‡½æ•°</init></methods></li>
<li></li>
<li>é’ˆå¯¹ä¸€ä¸ªclass/interface/enumä¸‹çš„æ‰€æœ‰æ–¹æ³•æˆ‘ä»¬å¯ä»¥ç”¨*æ¥è¡¨ç¤ºå¦‚ <code>public *;</code>åˆ™è¡¨ç¤ºæ‰€æœ‰ä¿®é¥°ç¬¦ä¸ºpublicçš„æ–¹æ³•å’Œå˜é‡ã€‚</li>
</ol>
<p>é’ˆå¯¹ä¸Šé¢çš„é—®é¢˜ï¼Œæˆ‘ä»¬è¿˜é—æ¼äº†ä¸€ä¸ªå¾ˆé‡çš„ä¸œè¥¿å°±æ˜¯é€šé…ç¬¦ï¼Œå¦‚<em>ï¼Œ*</em>ã€‚è€Œé€šé…ç¬¦åˆåˆ†ä¸ºä»¥ä¸‹ï¼š</p>
<h2><span id="packagenameclassnamemethodname">packageName/className/methodName</span></h2><p>åŒ…åæˆ–è€…ç±»åæ˜¯æˆ‘ä»¬å¸¸è§éœ€è¦ç”¨åˆ°çš„ï¼Œæˆ‘ä»¬åˆ—å‡ºæˆ‘ä»¬å¸¸ç”¨çš„é€šé…ç¬¦ã€‚<br>é€šé…ç¬¦ |   æ¦‚è¿°<br>â€”-    | â€”<br>ï¼Ÿ    | è¡¨ç¤ºä»»ä½•ä¸€ä¸ªä»»æ„ä½†ä¸æ˜¯åŒ…åä¸­çš„.åˆ†éš”ç¬¦ã€‚å¦‚<code>me.cyning.Test?</code>å¯ä»¥è¡¨ç¤º<code>me.cyning.Test1</code>å’Œ<code>me.cyning.TestA</code>ï¼Œè€Œä¸èƒ½ä»£è¡¨<code>me.cyning.Test11</code></p>
<ul>
<li>|  è¡¨ç¤ºä»»ä½•å¤šä¸ªå­—ç¬¦ä½†ä¸èƒ½æ˜¯åŒ…åä¸­çš„.åˆ†éš”ç¬¦ã€‚å¦‚<code>me.cyning.Test*</code>å¯ä»¥è¡¨ç¤º<code>me.cyning.Test1</code>å’Œ<code>me.cyning.Test11</code>ï¼Œè€Œä¸èƒ½ä»£è¡¨<code>me.cyning.Test.A</code></li>
<li><ul>
<li>| è¡¨ç¤ºä»»ä½•å¤šä¸ªå­—ç¬¦,å¯ä»¥æ˜¯åŒ…åä¸­çš„.åˆ†éš”ç¬¦,å¦‚<code>me.cyning.**</code>å¯ä»¥è¡¨ç¤º<code>me.cyning.Test1</code>å’Œ<code>me.cyning.Test11</code>,ä¹Ÿå¯ä»¥æ˜¯<code>me.cyning.Test.A</code></li>
</ul>
</li>
</ul>
<h2><span id="ç±»å‹æè¿°">ç±»å‹æè¿°</span></h2><p>åŒ…åæˆ–è€…ç±»åæ˜¯æˆ‘ä»¬å¸¸è§éœ€è¦ç”¨åˆ°çš„ï¼Œæˆ‘ä»¬åˆ—å‡ºæˆ‘ä»¬å¸¸ç”¨çš„é€šé…ç¬¦ã€‚å’Œ<code>packageName/className/methodName</code>æœ‰ç±»ä¼¼ä¹‹å¤„<br>é€šé…ç¬¦ |   æ¦‚è¿°<br>â€”-    | â€”<br>%  | é™¤äº†voidçš„åŸºæœ¬ç±»å‹<br>?  | å•ä¸ªå­—ç¬¦</p>
<ul>
<li>| ä¸åŒ…æ‹¬.åŒ…åˆ†éš”ç¬¦çš„ä»»æ„ç±»åçš„ä¸€éƒ¨åˆ†</li>
<li><ul>
<li>| åŒ…æ‹¬.åŒ…åˆ†éš”ç¬¦çš„ä»»æ„ç±»åçš„ä¸€éƒ¨åˆ†</li>
</ul>
</li>
<li>**  | ä»»æ„ç±»å‹<br>â€¦  | å¯è¡¨ç¤ºå¤šä¸ªä»»æ„ä¸”ä»»æ„ç±»å‹çš„ç±»å‹çš„å‚æ•° å¦‚init(â€¦)å¯ä»£è¡¨init(int a, int b) ä¹Ÿå¯ä»¥ä»£è¡¨æ˜¯init(String)<br>ç†Ÿæ‚‰äº†ProGuard Ruleçš„è§„åˆ™ï¼Œé‚£ä¹ˆæˆ‘ä»¬å†æ¥çœ‹æœ€å¼€å§‹æˆ‘ä»¬æåˆ°çš„[é»˜è®¤çš„ProGuard Rule](â€”<br>title: android_better_progurad<br>date: 2017-10-30 22:08:30<br>tags:</li>
</ul>
<hr>
<p>è¿‡äº†19å¤§ï¼Œå…šæœ‰äº†æœªæ¥5å¹´çš„è§„åˆ’ï¼Œæ–°ç†å¿µä½ Getäº†æ²¡ï¼Ÿï¼ˆæˆ‘è§‰å¾—å¼€å®Œ19å¤§ï¼Œåšåœ°é“éƒ½è½»æ¾å¤šäº†ï¼Œå“ˆå“ˆï¼‰ã€‚æˆ‘ä¹Ÿç»™è‡ªå·±è£‚äº†ä¸ªè§„åˆ’ï¼Œä¸¤å‘¨ä¸€ç¯‡åšå®¢ï¼Œè¶Šå¹²ï¼ˆgan ä¸€å£°ï¼‰è¶Šå¥½ã€‚ä»Šå¤©ç»™è‡ªå·±å¸¦æ¥çš„å¹²è´§æ˜¯ProGuardã€‚<br>å¯¹äºä¸€ä¸ªæœ‰ç»éªŒçš„ç¨‹åºå‘˜ï¼ŒProGuardå¤§å®¶ä¸€å®šä¸é™Œç”Ÿï¼Œæœ‰äººè¯´ä»–æ˜¯æ··æ·†ï¼Œæˆ‘å¿…é¡»çº æ­£ï¼Œæ··æ·†åªæ˜¯ProGuardçš„ä¸€ä¸ªè¿‡ç¨‹(æˆ‘ä¸ä¼šç§°ProGuardä¸ºæ··æ·†ï¼ŒProGuardå°±æ˜¯ProGuardï¼Œè°å†è¯´ProGuardæ‰æ˜¯çœŸæ­£çš„æ··æ·†è§†å¬).<br>ProGuardå…¶å®ä¸æ˜¯Androidç‰¹æœ‰çš„å·¥å…·ï¼Œä»–å…¶å®æ›´æ—©é€‚ç”¨äºjavaé¡¹ç›®ä¸­ï¼Œä¼˜åŒ–javaä»£ç ï¼Œä¿è¯javaç¨‹åºçš„å®‰å…¨æ€§ã€‚ç”±äºAndroidç¨‹åºå¤§éƒ¨åˆ†ä¹Ÿæ˜¯æ˜¯Javaä»£ç ï¼Œæ‰€ä»¥ProGuardæˆä¸ºAndroidå·¥ç¨‹å¸ˆå¿…ä¿®çš„ä¸€é—¨è¯¾ç¨‹ã€‚</p>
<h1><span id="ç®€å•è®¤è¯†proguard">ç®€å•è®¤è¯†ProGuard</span></h1><p>åœ¨å¹³æ—¶å¼€å‘ä¸­ï¼Œæˆ‘ä»¬çš„é¡¹ç›®æ˜¯ProGuardå¼€å…³é»˜è®¤æ˜¯æ˜¯å…³çš„ï¼Œæˆ‘ä»¬é€šè¿‡å¦‚ä¸‹ä»£ç æ‰“å¼€ProGuardï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">android &#123;</span><br><span class="line"></span><br><span class="line">    buildTypes &#123;</span><br><span class="line">        release &#123;</span><br><span class="line">            minifyEnabled <span class="keyword">true</span></span><br><span class="line">            <span class="function">proguardFiles <span class="title">getDefaultProguardFile</span><span class="params">(<span class="string">'proguard-android.txt'</span>)</span>ï¼Œ  'project.pro'</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">        &#125;</span></span><br><span class="line"><span class="function">    &#125;</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">&#125;</span></span><br></pre></td></tr></table></figure>

<p>å…ˆè§£é‡Šä¸‹æˆ‘ä»¬å¯ä»¥é€šè¿‡<code>minifyEnabled</code>æ‰“å¼€å¼€å…³ï¼Œé€šè¿‡<code>proguardFiles</code>æŒ‡å®šæˆ‘ä»¬çš„<code>ProGuard Rule</code>çš„å¤šä¸ªæ–‡ä»¶ï¼ˆåé¢ä¼šä»‹ç»ï¼‰ã€‚æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨<code>proguardFile</code>æŒ‡å®šä¸€ä¸ªä¸€ä¸ªæ–‡ä»¶ï¼Œå…¶ä¸­<code>proguard-android.txt</code>å®é™…ä¸Šæ˜¯æˆ‘ä»¬çš„<code>{Android Sdk path}/tools/proguard/</code>ä¸‹<code>proguard-android.txt</code>ã€‚è¿™æ ·å°±å¯ä»¥ç®€å•ä½¿ç”¨æˆ‘ä»¬çš„ProGuardï¼Œå½“ç„¶äº†å¯¹åº”çš„<code>ProGuard</code>ä¹Ÿæ˜¯æˆ‘ä»¬SDKä¸‹<code>proguard-android.txt</code></p>
<h1><span id="ä»€ä¹ˆæ˜¯proguard">ä»€ä¹ˆæ˜¯ProGuard</span></h1><p>é‚£ä¸ªç©¶ç«Ÿä»€ä¹ˆæ˜¯ProGuardå‘¢ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹ä¸‹<code>{Android Sdk path}/tools/proguard/</code>ä¸‹çš„ProGuardçš„docæ–‡æ¡£ï¼š</p>
<blockquote>
<p>ProGuard is a free Java class file shrinker, optimizer, obfuscator, and preverifier. It detects and removes unused classes, fields, methods, and attributes. It optimizes bytecode and removes unused instructions. It renames the remaining classes, fields, and methods using short meaningless names. Finally, it preverifies the processed code for Java 6 or for Java Micro Edition.</p>
</blockquote>
<p>å¤§æ¦‚æ„æ€å°±æ˜¯ï¼š ProGuardæ˜¯ä¸€ä¸ªå…è´¹çš„å¯ä»¥å°†java classæ–‡ä»¶è¿›è¡Œå‹ç¼©ï¼Œä¼˜åŒ–ï¼Œæ··æ·†ï¼Œé¢„æ ¡éªŒçš„å·¥å…·ã€‚å®ƒèƒ½åˆ é™¤æ— ç”¨çš„ç±»ï¼Œå˜é‡ã€æ–¹æ³•ä»¥åŠå±æ€§ã€‚å®ƒèƒ½ä¼˜åŒ–å­—èŠ‚ç ï¼Œç§»é™¤æ— ç”¨çš„æŒ‡ä»¤ï¼ŒåŒæ—¶å®ƒå°†ï¼ˆå‹ç¼©åï¼‰ä¿ç•™çš„ç±»ï¼Œå˜é‡å’Œæ–¹æ³•ä½¿ç”¨æ— æ„ä¹‰çš„æ®µå­—ç¬¦æ¥é‡å‘½åï¼Œè€Œåè¿˜èƒ½åœ¨å¯¹åº”çš„javaç‰ˆæœ¬ä¸Šè¿›è¡Œé¢„æ ¡éªŒè¿™äº›å¤„ç†åçš„codeã€‚<br>## ProGuardå››å…„å¼Ÿ<br><img src="http://7xwwa2.com1.z0.glb.clouddn.com/proguard_intro.png" alt></p>
<p>å¦‚ä¸Šå›¾ï¼ŒProGuardå®é™…ä¸Šå››å¤§å¤©ç‹ï¼ˆé­”å®¶å››å°†ï¼‰ï¼Œä»–ä»¬åˆ†åˆ«æ˜¯å‹ç¼©ï¼ˆshrinkingï¼‰ï¼Œä¼˜åŒ–ï¼ˆoptimizationï¼‰ï¼Œæ··æ·†ï¼ˆobfuscationï¼‰å’Œé¢„æ ¡éªŒï¼ˆpreverificationï¼‰ï¼Œä¸€ä¸ªclasså’Œå››å¤§å¤©ç‹ç¢°è¿‡é¢æ‰å¯ä»¥åˆ°æœ€åçš„å—å¤©é—¨ï¼ˆã€‚</p>
<p>å‹ç¼©(shrinking)ï¼šæ£€æµ‹å¹¶ç§»é™¤ä»£ç ä¸­æ— ç”¨çš„ç±»ã€å­—æ®µã€æ–¹æ³•å’Œç‰¹æ€§ï¼ˆAttributeï¼‰<br>ä¼˜åŒ–(optimization)ï¼šå¯¹å­—èŠ‚ç è¿›è¡Œä¼˜åŒ–ï¼Œç§»é™¤æ— ç”¨çš„æŒ‡ä»¤<br>æ··æ·†(obfuscation)ï¼šä½¿ç”¨aï¼Œbï¼Œcï¼Œdè¿™æ ·ç®€çŸ­è€Œæ— æ„ä¹‰çš„åç§°ï¼Œå¯¹ç±»ã€å­—æ®µå’Œæ–¹æ³•è¿›è¡Œé‡å‘½å<br>é¢„æ£€(preverification)ï¼šåœ¨Javaå¹³å°ä¸Šå¯¹å¤„ç†åçš„ä»£ç è¿›è¡Œé¢„æ£€ï¼Œç¡®ä¿åŠ è½½çš„classæ–‡ä»¶æ˜¯å¯æ‰§è¡Œçš„ã€‚<br>å¯¹äºä¸€ä¸ªclassæ–‡ä»¶ä¹Ÿè¦ç»å†å¦‚ä¸‹å››æ­¥ï¼š</p>
<ol>
<li><p>ä¼šé¦–å…ˆæ£€æŸ¥è¿™ä¸ªç±»æ˜¯å¦æœ‰åœ°æ–¹ç”¨åˆ°ï¼ˆæ²¡ç”¨åˆ°ç›´æ¥åˆ é™¤ï¼‰ï¼Œè¿™ä¸ªç±»é‡Œé¢çš„æ–¹æ³•æˆ–è€…å˜é‡å“ªäº›æˆ‘ä»¬æ²¡ç”¨åˆ°ï¼Œæ²¡ç”¨åˆ°å°±ç›´æ¥åˆ é™¤</p>
</li>
<li><p>è‹¥ç±»æ²¡æœ‰è¢«åˆ é™¤ï¼Œæ£€æŸ¥classæ–‡ä»¶çš„æ— ç”¨æŒ‡ä»¤å’Œå­—èŠ‚</p>
</li>
<li><p>å°†ä»ç„¶ä¿ç•™çš„ç±»ï¼Œæ··æ·†classååŠå†…éƒ¨çš„å˜é‡å’Œæ–¹æ³•å</p>
</li>
<li><p>åœ¨å¯¹åº”çš„javaçš„å¹³å°ä¸Šé¢„æ ¡éªŒè¿™ä¸ªclassæ˜¯å¦å®Œæ•´æœ‰æ•ˆ<br>è¿™ä¸ªæ˜¯é»˜è®¤çš„æƒ…å†µä¸‹ç»å†ç€å››ä¸ªæ­¥éª¤ï¼Œè¿™ä¸ªä¹Ÿä¸æ˜¯å¿…é¡»çš„ã€‚å¾ˆåƒç›®å‰ä¸­å›½çš„å¤§ç¯å¢ƒï¼Œä½ å¯ä»¥é€šè¿‡äººæƒ…æ¥é¿å…ä¸å¿…è¦çš„éº»çƒ¦ï¼Œè¿™å››å¤§å¤©ç‹ä¹Ÿä¸ä¾‹å¤–ã€‚<br>ä¾‹å¦‚æˆ‘å†™ä¸ªSDKï¼Œé‡Œé¢å°è£…å¾ˆå¤šjavaæ–‡ä»¶ï¼Œæœ€åç±»åº“ä¸ºç¬¬ä¸‰æ–¹æœåŠ¡ï¼Œæœ€åæˆ‘æ‰“å‡ºä¸€ä¸ªjarï¼Œè¿™ä¸ªjaræˆ‘æœŸæœ›ç”¨æ··æ·†ã€‚ä¸¥æ ¼æŒ‰ç…§æ··æ·†çš„å››å¤§å¤©ç‹çš„è§„åˆ™ï¼Œå°±ä¼šé‡åˆ°å¾ˆå¤šé—®é¢˜ï¼š</p>
</li>
<li><p>ä¿ç•™ä¸€äº›ç±»ã€‚é‡Œé¢çš„ç±»å¥½å¯¹å¤–ä½¿ç”¨çš„ï¼Œä¸ä¼šè¢«SDKå†…éƒ¨ä½¿ç”¨ï¼ŒæŒ‰ç…§æ··æ·†çš„å››å¤§å¤©ç‹çš„è§„åˆ™ï¼Œç¬¬ä¸€æ­¥ç›´æ¥å°±è¢«å¹²æ‰äº†ï¼Œæ‰€æœ‰å°±å¾—èµ°ç‚¹åé—¨<br>2. æŸäº›classï¼Œmethodæˆ–è€…å˜é‡ï¼Œæˆ‘æœŸæœ›ä¸è¦æ··æ·†ã€‚ä¾‹å¦‚ä¸€ä¸ªæ”¯ä»˜çš„classä¸ºPaySDKï¼Œé‡Œé¢çš„æ–¹æ³•ä¹Ÿå°½é‡æ˜¯aliPayï¼ŒwxPayï¼Œåç§°æœ‰æ„ä¹‰ï¼Œä½¿ç”¨æ··æ·†åPaySDKæˆäº†aï¼Œæ–¹æ³•åä¹Ÿæ˜¯æ— æ„ä¹‰çš„aï¼Œbï¼Œè¿™å¯¹ä½¿ç”¨sdkçš„å¼€å‘è€…æ˜¯ä¸å‹å¥½çš„ã€‚<br>ä¸ºäº†é¿å…è¿™ä¸ªé—®é¢˜ï¼Œå°±éœ€è¦æˆ‘ä»¬è‡ªå·±æ¥åˆ¶å®šä¸€ä¸ªè§„åˆ™ï¼Œåœ¨å»å—å¤©é—¨çš„è·¯ä¸Šï¼Œä½ åªç®¡è¿™ä¸ªè§„åˆ™æ¥ç»™å››å¤§å¤©ç‹çœ‹ï¼Œå‘Šè¯‰æŒ‰ç…§æˆ‘ä»¬çš„è§„åˆ™èµ°ï¼Œè€Œè¿™ä¸ªè§„åˆ™å°±æ˜¯<code>ProGuard Rule</code>æˆ‘ä»¬åˆšæ‰é…ç½®çš„<code>proguardFiles</code>,å¯¹äºæˆ‘ä»¬æ¥è¯´å†™ä¸€ä¸ª<code>ProGuard Rule</code>æ˜¯ç›®å‰æ¯”è¾ƒä¸å¤ªå¥½å†™çš„ä¸€ä»¶äº‹ã€‚</p>
</li>
</ol>
<h1><span id="proguard-rule">ProGuard Rule</span></h1><p>åœ¨ç¬¬ä¸€éƒ¨åˆ†æˆ‘ä»¬æåˆ°åœ¨ä¸»é¡¹ç›®ä¸‹çš„build.gradleé…ç½®æˆ‘ä»¬çš„<code>ProGuard Rule</code>,å…¶ä¸­Googleå®˜æ–¹æä¾›äº†ä¸€ä¸ªç®€å•çš„<a href="https://gist.github.com/ownwell/373860e6468671e8e65c8b9eb849f7c2#file-proguard-android-txt" target="_blank" rel="noopener">åŸºç¡€ç¤ºä¾‹</a>ï¼š<br>æˆ‘ä»¬å°±æ¥å¤§è‡´çœ‹ä¸‹ä»–ä»¬æ˜¯åˆ†åˆ«çš„ä½œç”¨ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># dont ä¸€èˆ¬æ˜¯ä»£è¡¨do notä¸è¦çš„æ„æ€ï¼Œè¿™ä¸ªå°±è¡¨ç¤ºæ··æ·†çš„å­—ç¬¦ä¸é€‚ç”¨å¤§å°å†™æ··åˆçš„ï¼ˆå¦‚Abï¼‰</span><br><span class="line">-dontusemixedcaseclassnames</span><br><span class="line">-dontskipnonpubliclibraryclasses</span><br></pre></td></tr></table></figure>

<p>è¿™ä¸ªæ˜¯Googleå»ºè®®çš„ï¼Œè‹¥ä½ éä½¿ç”¨å¤§å°æ··åˆï¼Œæ²¡äººä¼šæ‹¦ä½ ã€‚ğŸ˜†ã€‚<br><br><br></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># ä¸ä¼˜åŒ–ï¼Œdexä¸æ˜¯è¿è¡Œåœ¨JVMä¸Šçš„ï¼Œå½“ç„¶äº†ä¹Ÿä¸åšé¢„æ ¡éªŒ</span><br><span class="line">-dontoptimize</span><br><span class="line">-dontpreverify</span><br></pre></td></tr></table></figure>

<p>è¿™ä¸ªæ˜¯é’ˆå¯¹androidçš„å¼€å‘è€Œè¨€ï¼Œä¸è¿‡ä½ è¦ä½¿ç”¨ä¼˜åŒ–ï¼Œå°½é‡ä½¿ç”¨<code>{Android Sdk path}/tools/proguard/</code>ä¸‹çš„<code>proguard-android-optimize.txt</code>æ–‡ä»¶ã€‚<br><br><br></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># æ³¨è§£ç›¸å…³çš„</span><br><span class="line">-keepattributes *Annotation*</span><br><span class="line"># çŒœæµ‹æ˜¯GoogleæœåŠ¡ç›¸å…³çš„</span><br><span class="line">-keep <span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">com</span>.<span class="title">google</span>.<span class="title">vending</span>.<span class="title">licensing</span>.<span class="title">ILicensingService</span></span></span><br><span class="line"><span class="class">-<span class="title">keep</span> <span class="title">public</span> <span class="title">class</span> <span class="title">com</span>.<span class="title">android</span>.<span class="title">vending</span>.<span class="title">licensing</span>.<span class="title">ILicensingService</span></span></span><br></pre></td></tr></table></figure>

<p>å¯ä»¥çœ‹åˆ°æœ‰ä¸ª<code>keepattributes</code>è‚¯å®šæ˜¯ä¿ç•™ç±»çš„å±æ€§å•¦ï¼Œè¿˜æœ‰ä¸ª<code>-keep public class ç±»å</code>è¿™ä¸ªè‚¯å®šå°±æ˜¯ä¸ºäº†ä¿ç•™è¿™ä¸ªç±»ä¸è¢«å‹ç¼©æˆ–è€…æ··æ·†ã€‚<br><br><br></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">-keepclasseswithmembernames <span class="class"><span class="keyword">class</span> * </span>&#123;</span><br><span class="line">    <span class="keyword">native</span> &lt;methods&gt;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™ä¸ª<code>-keepclasseswithmembernames public class ç±»å</code>ä¸éš¾è§£é‡Šå§ï¼Œå­—é¢æ„æ€æ˜¯ä¿ç•™classå’Œç±»çš„æˆå‘˜ï¼Œå¹¶ä¸”è¿™ä¸ªç±»æœ‰ä¸ªnativeæ–¹æ³•ã€‚<br><br><br></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-keepclassmembers <span class="keyword">public</span> <span class="class"><span class="keyword">class</span> * <span class="keyword">extends</span> <span class="title">android</span>.<span class="title">view</span>.<span class="title">View</span> </span>&#123;</span><br><span class="line">   <span class="keyword">void</span> set*(***);</span><br><span class="line">   *** get*();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™ä¸ªå°±ä»£è¡¨ä¿ç•™ç±»ä¸­çš„getter/setteræ–¹æ³•ï¼Œè¿™ä¸ªç±»æ˜¯ç»§æ‰¿è‡ª<code>android.view.View</code><br><br><br></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">-keepclassmembers <span class="class"><span class="keyword">class</span> **.<span class="title">R</span>$* </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;fields&gt;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™ä¸ªè‚¯å®šæ˜¯ä¿ç•™æˆ‘ä»¬èµ„æºIDå¯¹åº”çš„Ræ–‡ä»¶ä¸­æ‰€æœ‰çš„é™æ€å˜é‡ã€‚<br><br><br></p>
<p>çœ‹äº†è¿™ä¹ˆå¤šæˆ‘ä»¬ä¼šäº§ç”Ÿç–‘é—®ï¼škeepã€keepclassmembersç­‰è¿™äº›keepå¼€å¤´çš„æœ‰å“ªäº›ï¼ŒåŒºåˆ«æ˜¯ä»€ä¹ˆï¼Œæ€ä¹ˆé…ç½®å‚æ•°ï¼Œclassï¼Œmethodè¿™äº›æ€ä¹ˆå†™ï¼Œ*<em>ä»¥åŠ</em>åˆ†åˆ«ä»£è¡¨ä»€ä¹ˆï¼Œå°±è®©æˆ‘ä»¬æ¥ä¸€èµ·æ¢ç´¢<code>ProGuard Rule</code>çš„å†™æ³•å§ã€‚</p>
<h2><span id="keep-options">Keep options</span></h2><p>keepç›®å‰å¸¸è§çš„å°±6å…­ç§ï¼š</p>
<ol>
<li>-keep [,modifier,â€¦] class_specification </li>
<li>-keepclassmembers [,modifier,â€¦] class_specification   </li>
<li>-keepclasseswithmembers [,modifier,â€¦] class_specification </li>
<li>-keepnames class_specification åœ¨å‹ç¼©ï¼ˆåˆ é™¤æ— ç”¨çš„ç±»å’Œæˆå‘˜ï¼‰åä¿ç•™ä¸‹æ¥çš„ç±»å’Œå…¶æˆå‘˜ä¸­ï¼Œé˜»æ­¢ç±»å’Œç±»çš„æˆå‘˜(é‡Œé¢çš„å˜é‡å’Œæ–¹æ³•éƒ½æ˜¯æˆå‘˜)æ··æ·†</li>
<li>-keepclassmembernames class_specification åœ¨å‹ç¼©åä¿ç•™ä¸‹æ¥çš„ç±»ä¸­ï¼Œé˜»æ­¢ç±»çš„æˆå‘˜è¢«æ··æ·†</li>
<li>-keepclasseswithmembernames class_specification</li>
</ol>
<h3><span id="æœ‰æ— nameçš„keep">æœ‰æ— nameçš„keep*</span></h3><p>å¯ä»¥çœ‹åˆ°å‰ä¸‰ä¸ªå®é™…ä¸Šæ˜¯æ¯”åä¸‰ä¸ªå°‘äº†nameçš„ï¼Œä½†æ˜¯æ„ä¹‰å´å¤§ä¸åŒå•Šã€‚å°±ä»¥keepå’ŒkeepNameä¸ºä¾‹å§ï¼Œ<br>keepæ˜¯é˜»æ­¢ç±»å’Œç±»çš„å˜é‡ï¼ˆå®é™…ä¸Šå°±æ˜¯ç±»ä¸­çš„æ–¹æ³•å’Œå˜é‡ï¼‰è¢«å‹ç¼©å’Œæ··æ·†ï¼Œè€Œkeepnamesé‚£ä¹ˆåˆ™æ˜¯åœ¨å‹ç¼©åï¼Œé˜²æ­¢ç±»å’Œç±»çš„æˆå‘˜è¢«æ··æ·†ã€‚æ¢å¥è¯è¯´ï¼Œkeepåœ¨å‹ç¼©ç¬¬ä¸€é“å¤§é—¨æ—¶ï¼Œå°±å·²ç»ç”Ÿæ•ˆï¼Œå¯ä»¥é¿å…è¢«å‹ç¼©æ‰ï¼Œå³ä½¿è¿™ä¸ªç±»æˆ–è€…æˆå‘˜æ²¡æœ‰è¢«ç”¨åˆ°ä¹Ÿä¸ä¼šè¢«ç§»é™¤ï¼Œè€Œkeepnamesåˆ™æ˜¯åœ¨å‹ç¼©åï¼Œä»ä¿ç•™çš„ç±»ä¸­æ¥çœ‹å“ªäº›ç±»å’Œæˆå‘˜ä¸èƒ½è¢«æ··æ·†ï¼Œæ˜¯åœ¨å‹ç¼©åæ‰ç”Ÿæ•ˆã€‚<br>å®˜æ–¹æ–‡æ¡£è§£é‡Šçš„å¾ˆåˆ°ä½ï¼š</p>
<blockquote>
<blockquote>
<blockquote>
<p>Short for -keep,allowshrinking class_specification</p>
</blockquote>
</blockquote>
</blockquote>
<p>å®é™…ä¸ŠåŠ äº†<code>allowshrinking</code>çš„keppå‘½ä»¤ï¼Œå…è®¸å‹ç¼©ã€‚</p>
<table>
<thead>
<tr>
<th>å…³é”®å­—</th>
<th>æ¦‚è¿°</th>
</tr>
</thead>
<tbody><tr>
<td>keep</td>
<td>é˜»æ­¢ç±»å’Œæˆå‘˜è¢«å’Œæ··æ·†</td>
</tr>
<tr>
<td>keepclassmember</td>
<td>é˜»æ­¢ç±»çš„æˆå‘˜è¢«å’Œæ··æ·†</td>
</tr>
<tr>
<td>keepclasseswithmembers</td>
<td>é˜»æ­¢ç±»å’Œç±»ä¸­ç‰¹å®šçš„æˆå‘˜è¢«å‹ç¼©å’Œæ··æ·†</td>
</tr>
<tr>
<td>keepnames</td>
<td>åœ¨å‹ç¼©åä¿ç•™ä¸‹æ¥çš„ç±»å’Œå…¶æˆå‘˜ä¸­ï¼Œé˜»æ­¢ç±»å’Œç±»çš„æˆå‘˜(é‡Œé¢çš„å˜é‡å’Œæ–¹æ³•éƒ½æ˜¯æˆå‘˜)æ··æ·†</td>
</tr>
<tr>
<td>keepclassmembernames</td>
<td>åœ¨å‹ç¼©åä¿ç•™ä¸‹æ¥çš„ç±»å’Œå…¶æˆå‘˜ä¸­ï¼Œé˜»æ­¢ç±»çš„æˆå‘˜è¢«æ··æ·†</td>
</tr>
<tr>
<td>keepclassmembernames</td>
<td>åœ¨å‹ç¼©åä¿ç•™ä¸‹æ¥çš„ç±»å’Œå…¶æˆå‘˜ä¸­ï¼Œé˜»æ­¢ç±»å’Œç±»ä¸­ç‰¹å®šçš„æˆå‘˜è¢«æ··æ·†</td>
</tr>
</tbody></table>
<h3><span id="keep-vs-keepclasseswithmembers">keep VS keepclasseswithmembers</span></h3><p>è¿™ä¸¤ä¸ªéƒ½å¯ä»¥æ³¨é‡Šä¿ç•™ä½classåŠå…¶æˆå‘˜ï¼Œä½†æ˜¯äºŒè€…åŒºåˆ†æœ€å¤§ä¹‹å¤„åœ¨äºï¼škeepåªçœ‹åé¢çš„class æ˜¯ä»€ä¹ˆï¼Œä¸å…³å¿ƒåé¢çš„æˆå‘˜ï¼Œè€Œkeepclasseswithmembersåˆ™æ˜¯æ›´å…³å¿ƒåé¢çš„æ¡ä»¶ã€‚å¹²è¯´å¤ªç¡¬ï¼Œæ¥ç‚¹æ¹¿çš„ã€‚<br>å¦‚ä¸‹è§„åˆ™ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">-keepclasseswithmembernames <span class="class"><span class="keyword">class</span> <span class="title">me</span>.<span class="title">cyning</span>.* </span>&#123;</span><br><span class="line">    <span class="keyword">native</span> &lt;methods&gt;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å½“åœ¨me.cyningåŒ…ä¸‹ï¼Œé‡åˆ°æ–¹æ³•ä½“æœ‰nativeæ–¹æ³•æ—¶ï¼Œåˆ™keepå…¶classï¼ŒåŒæ—¶keepè¿™ä¸ªclassçš„nativeçš„æ–¹æ³•ï¼ˆå…¶ä»–æ— ç”¨æ–¹æ³•å¯èƒ½ä¼šè¢«åˆ æ‰æˆ–è€…æ–¹æ³•åä¼šè¢«æ··æ·†ï¼‰ã€‚</p>
<p>è€Œ</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">-keep <span class="class"><span class="keyword">class</span> <span class="title">me</span>.<span class="title">cyning</span>.* </span>&#123;</span><br><span class="line">    <span class="keyword">native</span> &lt;methods&gt;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åˆ™ä¼šå°†classä¸å‹ç¼©</p>
<p>è¿™ä¸ªkeep*å¯ä»¥ä¿è¯ç±»æˆ–è€…æ–¹æ³•ä¸è¢«å‹ç¼©å’Œæ··æ·†ï¼Œè‡³äºé€‰å“ªä¸ªçœ‹ä½ å¿ƒæƒ…å–½ã€‚</p>
<p>## </p>
<h2><span id="class-specifications">Class specifications</span></h2><p>åœ¨åˆšæ‰ç¤ºä¾‹ä¸­ï¼Œæœ‰ä¸ªä»£ç ç‰‡æ®µï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-keep <span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">com</span>.<span class="title">google</span>.<span class="title">vending</span>.<span class="title">licensing</span>.<span class="title">ILicensingService</span></span></span><br></pre></td></tr></table></figure>

<p>é€šè¿‡è¿™ä¸€å¥<code>keep</code>äº†<code>com.google.vending.licensing.ILicensingService</code>ï¼Œä½†æ˜¯æˆ‘ä»¬è‹¥æ˜¯<code>keep</code>æŸä¸€ç±»æ—¶è€Œä¸åªæ˜¯ä¸€ä¸ªclassæ—¶ï¼Œæˆ‘ä»¬è¦æ€ä¹ˆåŠï¼Ÿ<br>è¿™å°±éœ€è¦æˆ‘ä»¬å°†è¿™ä¸€ç±»çš„åšä¸ªæŠ½è±¡ï¼Œè€Œå°†è¿™æ‰€æœ‰çš„ç±»éƒ½åˆ—å‡ºæ¥ä¸€ä¸ªä¸ªkeepã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥æ¥çœ‹ä¸‹classçš„åŸºæœ¬ç¤ºä¾‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[<span class="meta">@annotationtype</span>] [[!]<span class="keyword">public</span>|<span class="keyword">final</span>|<span class="keyword">abstract</span>|@ ...] [!]<span class="class"><span class="keyword">interface</span>|<span class="title">class</span>|<span class="title">enum</span> <span class="title">classname</span></span></span><br><span class="line">    [extends|implements [@annotationtype] classname]</span><br><span class="line">[&#123;</span><br><span class="line">    [<span class="meta">@annotationtype</span>] [[!]<span class="keyword">public</span>|<span class="keyword">private</span>|<span class="keyword">protected</span>|<span class="keyword">static</span>|<span class="keyword">volatile</span>|<span class="keyword">transient</span> ...] &lt;fields&gt; |</span><br><span class="line">                                                                      (fieldtype fieldname);</span><br><span class="line">    [<span class="meta">@annotationtype</span>] [[!]<span class="keyword">public</span>|<span class="keyword">private</span>|<span class="keyword">protected</span>|<span class="keyword">static</span>|<span class="keyword">synchronized</span>|<span class="keyword">native</span>|<span class="keyword">abstract</span>|<span class="keyword">strictfp</span> ...] &lt;methods&gt; |</span><br><span class="line">                                                                                           &lt;init&gt;(argumenttype,...) |</span><br><span class="line">                                                                                           classname(argumenttype,...) |</span><br><span class="line">                                                                                           (<span class="function">returntype <span class="title">methodname</span><span class="params">(argumenttype,...)</span>)</span>;</span><br><span class="line">    [<span class="meta">@annotationtype</span>] [[!]<span class="keyword">public</span>|<span class="keyword">private</span>|<span class="keyword">protected</span>|<span class="keyword">static</span> ... ] *;</span><br><span class="line">    ...</span><br><span class="line">&#125;]</span><br></pre></td></tr></table></figure>

<p>å…ˆæ¥è§£é‡Šä¸‹[]å§ï¼Œè¿™ä¸ªéƒ½æ˜¯å¯é€‰çš„ï¼Œå¯ä»¥é€‰æ‹©æ— ï¼Œä¹Ÿå¯ä»¥é€‰æ‹©[]é‡Œçš„ä¸€ç§æˆ–è€…å¤šç§ã€‚å¦‚ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@me</span>.cyning.Keep <span class="class"><span class="keyword">class</span> * </span>&#123;</span><br><span class="line">   <span class="keyword">native</span> &lt;methods&gt;() </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å°±è¡¨ç¤ºæ‰€æœ‰åŠ äº†<code>me.cyning.Keep</code>ç±»æ³¨è§£ä¸”æœ‰nativeæ–¹æ³•çš„ç±»ã€‚<br>å°±è®©æˆ‘ä»¬åˆ†åˆ«æ¥çœ‹<code>Class specifications</code></p>
<ol>
<li>annotationtypeå®é™…ä¸Šå°±æ˜¯ç±»æ³¨è§£ï¼Œå¦‚ä¸Šé¢<code>@me.cyning.Keep</code></li>
<li>class/interface/enum å‰å¯ä»¥æ·»åŠ ä¿®é¥°ç¬¦å¦‚publicï¼Œfinalï¼Œabstractç­‰ä¿®é¥°ç¬¦ï¼Œä¹Ÿå¯ä»¥åœ¨è¿™äº›ä¿®é¥°ç¬¦å‰åŠ !è¡¨ç¤ºå¦å®šï¼Œå¦‚!private éç§æœ‰çš„ï¼›åœ¨class/interface/enumå‰ä¹Ÿå¯ä»¥åŠ !è¡¨ç¤ºå¦å®šï¼Œéƒ½æ˜¯é»‘ç§‘æŠ€å•Š</li>
<li>extends/implements åå¯ä»¥æ·»åŠ æˆ‘ä»¬ç»§æ‰¿æˆ–è€…å®ç°çš„ç±»æˆ–è€…æ¥å£ï¼Œä½†æ˜¯è®°ä½ä¸€å®šè¦å†™å…¨åï¼ˆåŒ…å+classnameï¼‰ã€‚</li>
<li><fields> è¡¨ç¤ºé‡Œé¢çš„å˜é‡ï¼Œä»–çš„å‰é¢å¯ä»¥åŠ å…¥ä¿®é¥°ç¬¦<code>public</code>ã€<code>private</code>ã€<code>protected</code>ã€<code>static</code>ã€<code>volatile</code>ã€<code>transient</code>ç­‰ã€‚</fields></li>
<li><methods>å¯ä»¥è¡¨ç¤ºå‡ºäº†æ„é€ å‡½æ•°å¤–çš„æ–¹æ³•ï¼Œå®ƒå‰é¢ä¹Ÿå¯ä»¥åŠ å…¥<code>public</code>ã€<code>private</code>ã€<code>protected</code>ã€<code>static</code>|<code>synchronized</code>ã€<code>native</code>ã€<code>abstract</code>ã€<code>strictfp</code>ç­‰ä¿®é¥°ç¬¦;è€Œ<init>åˆ™è¡¨ç¤ºæ„é€ å‡½æ•°</init></methods></li>
<li></li>
<li>é’ˆå¯¹ä¸€ä¸ªclass/interface/enumä¸‹çš„æ‰€æœ‰æ–¹æ³•æˆ‘ä»¬å¯ä»¥ç”¨*æ¥è¡¨ç¤ºå¦‚ <code>public *;</code>åˆ™è¡¨ç¤ºæ‰€æœ‰ä¿®é¥°ç¬¦ä¸ºpublicçš„æ–¹æ³•å’Œå˜é‡ã€‚</li>
</ol>
<p>é’ˆå¯¹ä¸Šé¢çš„é—®é¢˜ï¼Œæˆ‘ä»¬è¿˜é—æ¼äº†ä¸€ä¸ªå¾ˆé‡çš„ä¸œè¥¿å°±æ˜¯é€šé…ç¬¦ï¼Œå¦‚<em>ï¼Œ*</em>ã€‚è€Œé€šé…ç¬¦åˆåˆ†ä¸ºä»¥ä¸‹ï¼š</p>
<h2><span id="packagenameclassnamemethodname">packageName/className/methodName</span></h2><p>åŒ…åæˆ–è€…ç±»åæ˜¯æˆ‘ä»¬å¸¸è§éœ€è¦ç”¨åˆ°çš„ï¼Œæˆ‘ä»¬åˆ—å‡ºæˆ‘ä»¬å¸¸ç”¨çš„é€šé…ç¬¦ã€‚<br>é€šé…ç¬¦ |   æ¦‚è¿°<br>â€”-    | â€”<br>ï¼Ÿ    | è¡¨ç¤ºä»»ä½•ä¸€ä¸ªä»»æ„ä½†ä¸æ˜¯åŒ…åä¸­çš„.åˆ†éš”ç¬¦ã€‚å¦‚<code>me.cyning.Test?</code>å¯ä»¥è¡¨ç¤º<code>me.cyning.Test1</code>å’Œ<code>me.cyning.TestA</code>ï¼Œè€Œä¸èƒ½ä»£è¡¨<code>me.cyning.Test11</code></p>
<ul>
<li>|  è¡¨ç¤ºä»»ä½•å¤šä¸ªå­—ç¬¦ä½†ä¸èƒ½æ˜¯åŒ…åä¸­çš„.åˆ†éš”ç¬¦ã€‚å¦‚<code>me.cyning.Test*</code>å¯ä»¥è¡¨ç¤º<code>me.cyning.Test1</code>å’Œ<code>me.cyning.Test11</code>ï¼Œè€Œä¸èƒ½ä»£è¡¨<code>me.cyning.Test.A</code></li>
<li><ul>
<li>| è¡¨ç¤ºä»»ä½•å¤šä¸ªå­—ç¬¦,å¯ä»¥æ˜¯åŒ…åä¸­çš„.åˆ†éš”ç¬¦,å¦‚<code>me.cyning.**</code>å¯ä»¥è¡¨ç¤º<code>me.cyning.Test1</code>å’Œ<code>me.cyning.Test11</code>,ä¹Ÿå¯ä»¥æ˜¯<code>me.cyning.Test.A</code></li>
</ul>
</li>
</ul>
<h2><span id="ç±»å‹æè¿°">ç±»å‹æè¿°</span></h2><p>åŒ…åæˆ–è€…ç±»åæ˜¯æˆ‘ä»¬å¸¸è§éœ€è¦ç”¨åˆ°çš„ï¼Œæˆ‘ä»¬åˆ—å‡ºæˆ‘ä»¬å¸¸ç”¨çš„é€šé…ç¬¦ã€‚å’Œ<code>packageName/className/methodName</code>æœ‰ç±»ä¼¼ä¹‹å¤„<br>é€šé…ç¬¦ |   æ¦‚è¿°<br>â€”-    | â€”<br>%  | é™¤äº†voidçš„åŸºæœ¬ç±»å‹<br>?  | å•ä¸ªå­—ç¬¦</p>
<ul>
<li>| ä¸åŒ…æ‹¬.åŒ…åˆ†éš”ç¬¦çš„ä»»æ„ç±»åçš„ä¸€éƒ¨åˆ†</li>
<li><ul>
<li>| åŒ…æ‹¬.åŒ…åˆ†éš”ç¬¦çš„ä»»æ„ç±»åçš„ä¸€éƒ¨åˆ†</li>
</ul>
</li>
<li>**  | ä»»æ„ç±»å‹<br>â€¦  | å¯è¡¨ç¤ºå¤šä¸ªä»»æ„ä¸”ä»»æ„ç±»å‹çš„ç±»å‹çš„å‚æ•° å¦‚init(â€¦)å¯ä»£è¡¨init(int a, int b) ä¹Ÿå¯ä»¥ä»£è¡¨æ˜¯init(String)<br>ç†Ÿæ‚‰äº†ProGuard Ruleçš„è§„åˆ™ï¼Œé‚£ä¹ˆæˆ‘ä»¬å†æ¥çœ‹æœ€å¼€å§‹æˆ‘ä»¬æåˆ°çš„<a href="https://gist.github.com/ownwell/373860e6468671e8e65c8b9eb849f7c2#file-proguard-android-txt" target="_blank" rel="noopener">é»˜è®¤çš„ProGuard Rule</a>ã€‚ </li>
</ul>
<p>â€”â€” å»ºè®®è¯»è€…æœ‰æ—¶é—´ç»“åˆä¸Šé¢ä»‹ç»çš„Class specificationså’ŒKeep Optionsï¼Œæ¥é‡æ–°è®¤è¯†å’ŒéªŒè¯ä¸‹ã€‚â€”â€”â€“</p>
<h2><span id="è‡ªå®šä¹‰proguard-rule">è‡ªå®šä¹‰ProGuard Rule)</span></h2><p>æˆ‘ä»¬è¦è‡ªå®šä¹‰çš„ProGuard Ruleï¼Œå…¶å®ä¹Ÿæ˜¯ä¸‰æ­¥èµ°ï¼šåŸºæœ¬Proguard Ruleï¼Œä¸šåŠ¡ä¸­å¸¸è§ä»£ç çš„ProGuard Ruleï¼Œç¬¬ä¸‰æ–¹SDKçš„ProGuard Ruleï¼Œä¸€èˆ¬æƒ…å†µä¸»è¦æŒ‰ç…§ä¸‰æ­¥èµ°ï¼Œå°½é‡åšåˆ°ProGuardæ¶‰åŠåˆ°æˆ‘ä»¬åº”ProGuardä¹‹å¤„ã€‚</p>
<h3><span id="åŸºæœ¬proguard-rule">åŸºæœ¬Proguard Rule</span></h3><p>å¯ä»¥ç›´æ¥å‚è€ƒæˆ‘ä»¬çš„<a href="https://gist.github.com/ownwell/373860e6468671e8e65c8b9eb849f7c2#file-proguard-android-txt" target="_blank" rel="noopener">é»˜è®¤çš„ProGuard Rule</a>ï¼Œè¿™ä¸ªä¸€èˆ¬ä¸ä¼šæ¶‰åŠåˆ°ä¸šåŠ¡ï¼Œä¹Ÿå¯ä»¥åœ¨å…¶å°¾éƒ¨ç»§ç»­é€‚å½“åŠ å…¥ï¼Œå¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"># é¿å…æ··æ·†æ³›å‹ï¼Œè¿™åœ¨JSONå®ä½“æ˜ å°„æ—¶éå¸¸é‡è¦ï¼Œæ¯”å¦‚fastJson</span><br><span class="line">-keepattributes Signature</span><br><span class="line"></span><br><span class="line"># æŠ›å‡ºå¼‚å¸¸æ—¶ä¿ç•™ä»£ç è¡Œå·ï¼Œåœ¨å¼‚å¸¸åˆ†æä¸­å¯ä»¥æ–¹ä¾¿å®šä½</span><br><span class="line">-keepattributes SourceFile,LineNumberTable</span><br><span class="line"></span><br><span class="line"># æŠ›å‡ºå¼‚å¸¸æ—¶ä¿ç•™ä»£ç è¡Œå·ï¼Œåœ¨å¼‚å¸¸åˆ†æä¸­å¯ä»¥æ–¹ä¾¿å®šä½</span><br><span class="line">-keepattributes SourceFile,LineNumberTable</span><br><span class="line"></span><br><span class="line"># ä¿ç•™Serializableåºåˆ—åŒ–çš„ç±»ä¸è¢«æ··æ·†</span><br><span class="line">-keepclassmembers <span class="class"><span class="keyword">class</span> * <span class="keyword">implements</span> <span class="title">java</span>.<span class="title">io</span>.<span class="title">Serializable</span> </span>&#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> java.io.ObjectStreamField[] serialPersistentFields;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">writeObject</span><span class="params">(java.io.ObjectOutputStream)</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">readObject</span><span class="params">(java.io.ObjectInputStream)</span></span>;</span><br><span class="line">    java.lang.<span class="function">Object <span class="title">writeReplace</span><span class="params">()</span></span>;</span><br><span class="line">    java.lang.<span class="function">Object <span class="title">readResolve</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># å¯¹äºRï¼ˆèµ„æºï¼‰ä¸‹çš„æ‰€æœ‰ç±»åŠå…¶æ–¹æ³•ï¼Œéƒ½ä¸èƒ½è¢«æ··æ·†</span><br><span class="line">-keep <span class="class"><span class="keyword">class</span> **.<span class="title">R</span>$* </span>&#123;</span><br><span class="line">    *;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™ä¸ªå¤§å®¶æ˜¯ä¸æ˜¯åŸºæœ¬ä¸Šæ˜¯æˆ‘ä»¬æœ€æœ€å¸¸è§çš„ï¼Œä¸æ˜¯ä¸€å®šå¦‚æ­¤ï¼Œè¿™ä¸ªæ˜¯ä¸ªäººè§‚ç‚¹ï¼Œä»…ä¾›å‚è€ƒä½¿ç”¨ã€‚</p>
<h3><span id="ä¸šåŠ¡å¸¸è§">ä¸šåŠ¡å¸¸è§</span></h3><p>è¿™ä¸ªéœ€è¦ç»“åˆè‡ªå·±çš„ä¸šåŠ¡æ¥åšï¼Œæˆ–è€…æ¥çœ‹ï¼Œä¾‹å¦‚æˆ‘çš„ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">#</span><br><span class="line"> ä¿ç•™å®ä½“ç±»å’Œæˆå‘˜ä¸è¢«æ··æ·†</span><br><span class="line">-keep <span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">com</span>.<span class="title">xxxx</span>.<span class="title">entity</span>.** </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> set*(***);</span><br><span class="line">    <span class="keyword">public</span> *** get*();</span><br><span class="line">    <span class="keyword">public</span> *** is*();</span><br><span class="line">&#125;</span><br><span class="line">ä¸€</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># å¯¹WebViewçš„å¤„ç†</span><br><span class="line">-keepclassmembers <span class="class"><span class="keyword">class</span> * <span class="keyword">extends</span> <span class="title">android</span>.<span class="title">webkit</span>.<span class="title">webViewClient</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> *(android.webkit.WebView, java.lang.String, android.graphics.Bitmap);</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">boolean</span> *(android.webkit.WebView, java.lang.String)</span><br><span class="line">&#125;</span><br><span class="line">-keepclassmembers <span class="class"><span class="keyword">class</span> * <span class="keyword">extends</span> <span class="title">android</span>.<span class="title">webkit</span>.<span class="title">webViewClient</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> *(android.webkit.webView, java.lang.String)</span><br><span class="line">&#125;</span><br><span class="line"># ä¿ç•™JSæ–¹æ³•ä¸è¢«æ··æ·†</span><br><span class="line">-keepclassmembers <span class="class"><span class="keyword">class</span> <span class="title">com</span>.<span class="title">example</span>.<span class="title">xxx</span>.<span class="title">MainActivity</span>$<span class="title">JSInterface1</span> </span>&#123;</span><br><span class="line">    &lt;methods&gt;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#  åå°„ä¸­ç”¨åˆ°çš„ç±»æˆ–è€…æ–¹æ³•</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">### ç¬¬ä¸‰æ–¹åº“</span><br><span class="line">ä¸€ä¸ªä¼˜ç§€çš„å¼€æºåº“ï¼Œä¸€èˆ¬ä¼šæä¾›æˆ‘ä»¬ProGuard Ruleï¼Œéƒ½è¯´å•¦æ˜¯ä¸€ç­å•¦ï¼ŒäºŒç­çš„åŒå­¦è¿˜æ˜¯éœ€è¦æ ¹æ®æºä»£ç æ¥è‡ªå·±ä¸ºå¼€æºåº“æ·»åŠ ProGuard Ruleã€‚</span><br><span class="line"></span><br><span class="line">```java</span><br><span class="line">-keep <span class="class"><span class="keyword">class</span> <span class="title">android</span>.<span class="title">support</span>.<span class="title">v4</span>.**  </span>&#123; *; &#125;</span><br><span class="line">-keep <span class="class"><span class="keyword">interface</span> <span class="title">android</span>.<span class="title">support</span>.<span class="title">v4</span>.<span class="title">app</span>.** </span>&#123; *; &#125;</span><br><span class="line">-keep <span class="keyword">public</span> <span class="class"><span class="keyword">class</span> * <span class="keyword">extends</span> <span class="title">android</span>.<span class="title">support</span>.<span class="title">v4</span>.**</span></span><br><span class="line"><span class="class">-<span class="title">keep</span> <span class="title">public</span> <span class="title">class</span> * <span class="keyword">extends</span> <span class="title">android</span>.<span class="title">app</span>.<span class="title">Fragment</span></span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">-<span class="title">dontwarn</span> <span class="title">com</span>.<span class="title">alipay</span>.<span class="title">android</span>.<span class="title">app</span>.**</span></span><br><span class="line"><span class="class">-<span class="title">keep</span> <span class="title">public</span> <span class="title">class</span> <span class="title">com</span>.<span class="title">alipay</span>.**  </span>&#123; *; &#125;</span><br></pre></td></tr></table></figure>

<p>ç½‘ä¸Šæœ‰é›·é”‹å¸®æˆ‘ä»¬å‡†å¤‡äº†ä¸€ä»½ï¼š<a href="https://github.com/msdx/android-proguard-cn" target="_blank" rel="noopener">msdx/android-proguard-cn</a>,æ‹¿èµ°ä¸è°¢ã€‚</p>
<h1><span id="å½©è›‹">å½©è›‹</span></h1><p>ä¹‹å‰çœ‹èµµå››å¤§å“¥çš„ä¸€ç¯‡æ–‡ç« ï¼Œ<a href="http://www.wjdiankong.cn/android%E5%AE%89%E5%85%A8%E9%98%B2%E6%8A%A4%E4%B9%8B%E6%97%85-%E5%B8%A6%E4%BD%A0%E6%8A%8Aapk%E6%B7%B7%E6%B7%86%E6%88%90%E4%B8%AD%E6%96%87%E8%AF%AD%E8%A8%80%E4%BB%A3%E7%A0%81/" target="_blank" rel="noopener">Androidå®‰å…¨é˜²æŠ¤ä¹‹æ—…â€”å¸¦ä½ æŠŠApkæ··æ·†æˆä¸­æ–‡è¯­è¨€ä»£ç 
</a>,å®ƒä»æºç ä¸Šåšäº†å¤„ç†ï¼Œä¸è¿‡è¿™ä¸ªä¸æ˜¯æˆ‘æœŸæœ›çš„ï¼Œåæ¥å±…ç„¶å‘ç°ï¼ŒProGuardå±…ç„¶çœŸçš„å¯ä»¥è®¾ç½®mappdingçš„å­—å…¸ï¼š<br>-obfuscationdictionary naruto.txt<br>narutoå·²ç»ä¸Šä¼ åˆ°<a href="https://gist.github.com/ownwell/2dc6486b4cdda3ab556859c1d63045d3" target="_blank" rel="noopener">gitgist</a>å•¦.<br>æ‰“å¼€æœ‰æƒŠå–œå“¦ã€‚</p>

      
    </div>
    <div class="article-footer">
      <blockquote class="mt-2x">
  <ul class="post-copyright list-unstyled">
    
    <li class="post-copyright-link hidden-xs">
      <strong>æœ¬æ–‡é“¾æ¥ï¼š</strong>
      <a href="http://ownwell.github.io/2017/10/30/android-better-progurad/" title="ã€Androidè¿›é˜¶ã€‘Androidä¸­ä½¿ç”¨ProGuard" target="_blank" rel="external">http://ownwell.github.io/2017/10/30/android-better-progurad/</a>
    </li>
    
    <li class="post-copyright-license">
      <strong>ç‰ˆæƒå£°æ˜ï¼š </strong> æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a href="http://creativecommons.org/licenses/by/4.0/deed.zh" target="_blank" rel="external">CC BY 4.0 CNåè®®</a> è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼
    </li>
  </ul>
</blockquote>


<div class="panel panel-default panel-badger">
  <div class="panel-body">
    <figure class="media">
      <div class="media-left">
        <a href="https://github.com/ownwell" target="_blank" class="img-burn thumb-sm visible-lg">
          <img src="/images/cyning.png" class="img-rounded w-full" alt="">
        </a>
      </div>
      <div class="media-body">
        <h3 class="media-heading"><a href="https://github.com/ownwell" target="_blank"><span class="text-dark">Cyning</span><small class="ml-1x">Android Developer</small></a></h3>
        <div>å£«ä¸å¯ä¸å¼˜æ¯…ï¼Œä»»é‡è€Œé“è¿œ</div>
      </div>
    </figure>
  </div>
</div>


    </div>
  </article>
  
    
  <section id="comments">
  	
      <div id="vcomments"></div>
    
  </section>


  
</div>

  <nav class="bar bar-footer clearfix" data-stick-bottom>
  <div class="bar-inner">
  
  <ul class="pager pull-left">
    
    <li class="prev">
      <a href="/2017/12/04/love-yourself/" title="çˆ±è‡ªå·±"><i class="icon icon-angle-left" aria-hidden="true"></i><span>&nbsp;&nbsp;ä¸Šä¸€ç¯‡</span></a>
    </li>
    
    
    <li class="next">
      <a href="/2017/10/13/apk-two-signer/" title="ã€Androidè¿›é˜¶ã€‘Androidçš„APKä¸¤ç§ç­¾å"><span>ä¸‹ä¸€ç¯‡&nbsp;&nbsp;</span><i class="icon icon-angle-right" aria-hidden="true"></i></a>
    </li>
    
    
  </ul>
  
  
  <!-- Button trigger modal -->
  <button type="button" class="btn btn-fancy btn-donate pop-onhover bg-gradient-warning" data-toggle="modal" data-target="#donateModal"><span>èµ</span></button>
  <!-- <div class="wave-icon wave-icon-danger btn-donate" data-toggle="modal" data-target="#donateModal">
    <div class="wave-circle"><span class="icon"><i class="icon icon-bill"></i></span></div>
  </div> -->
  
  
  <div class="bar-right">
    
    <div class="share-component" data-sites="weibo,qq,wechat,facebook,twitter" data-mobile-sites="weibo,qq,qzone"></div>
    
  </div>
  </div>
</nav>
  
<!-- Modal -->
<div class="modal modal-center modal-small modal-xs-full fade" id="donateModal" tabindex="-1" role="dialog">
  <div class="modal-dialog" role="document">
    <div class="modal-content donate">
      <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
      <div class="modal-body">
        <div class="donate-box">
          <div class="donate-head">
            <p>æ„Ÿè°¢æ‚¨çš„æ”¯æŒï¼Œæˆ‘ä¼šç»§ç»­åŠªåŠ›çš„!</p>
          </div>
          <div class="tab-content">
            <div role="tabpanel" class="tab-pane fade active in" id="alipay">
              <div class="donate-payimg">
                <img src="/images/donate/alipayimg.png" alt="æ‰«ç æ”¯æŒ" title="æ‰«ä¸€æ‰«" />
              </div>
              <p class="text-muted mv">æ‰«ç æ‰“èµï¼Œä½ è¯´å¤šå°‘å°±å¤šå°‘</p>
              <p class="text-grey">æ‰“å¼€æ”¯ä»˜å®æ‰«ä¸€æ‰«ï¼Œå³å¯è¿›è¡Œæ‰«ç æ‰“èµå“¦</p>
            </div>
            <div role="tabpanel" class="tab-pane fade" id="wechatpay">
              <div class="donate-payimg">
                <img src="/images/donate/wechatpayimg.png" alt="æ‰«ç æ”¯æŒ" title="æ‰«ä¸€æ‰«" />
              </div>
              <p class="text-muted mv">æ‰«ç æ‰“èµï¼Œä½ è¯´å¤šå°‘å°±å¤šå°‘</p>
              <p class="text-grey">æ‰“å¼€å¾®ä¿¡æ‰«ä¸€æ‰«ï¼Œå³å¯è¿›è¡Œæ‰«ç æ‰“èµå“¦</p>
            </div>
          </div>
          <div class="donate-footer">
            <ul class="nav nav-tabs nav-justified" role="tablist">
              <li role="presentation" class="active">
                <a href="#alipay" id="alipay-tab" role="tab" data-toggle="tab" aria-controls="alipay" aria-expanded="true"><i class="icon icon-alipay"></i> æ”¯ä»˜å®</a>
              </li>
              <li role="presentation" class="">
                <a href="#wechatpay" role="tab" id="wechatpay-tab" data-toggle="tab" aria-controls="wechatpay" aria-expanded="false"><i class="icon icon-wepay"></i> å¾®ä¿¡æ”¯ä»˜</a>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>



</main>

  <footer class="footer" itemscope itemtype="http://schema.org/WPFooter">
	
	
    <ul class="social-links">
    	
        <li><a href="https://github.com/ownwell" target="_blank" title="Github" data-toggle=tooltip data-placement=top><i class="icon icon-github"></i></a></li>
        
        <li><a href="/atom.xml" target="_blank" title="Rss" data-toggle=tooltip data-placement=top><i class="icon icon-rss"></i></a></li>
        
    </ul>

    <div class="copyright">
    	
        <div class="publishby">
        	Theme by <a href="https://github.com/cofess" target="_blank"> cofess </a>base on <a href="https://github.com/cofess/hexo-theme-pure" target="_blank">pure</a>.
        </div>
    </div>
</footer>
  <script src="//cdn.jsdelivr.net/npm/jquery@1.12.4/dist/jquery.min.js"></script>
<script>
window.jQuery || document.write('<script src="js/jquery.min.js"><\/script>')
</script>
<script src="/js/plugin.min.js"></script>
<script src="/js/application.js"></script>

    <script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: 'æ–‡ç« ',
            PAGES: 'é¡µé¢',
            CATEGORIES: 'åˆ†ç±»',
            TAGS: 'æ ‡ç­¾',
            UNTITLED: '(æœªå‘½å)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>
<script src="/js/insight.js"></script>





   




   
    
  <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/valine"></script>
  <script type="text/javascript">
  var GUEST = ['nick', 'mail', 'link'];
  var meta = 'nick,mail,link';
  meta = meta.split(',').filter(function(item) {
    return GUEST.indexOf(item) > -1;
  });
  new Valine({
    el: '#vcomments',
    verify: false,
    notify: false,
    appId: '',
    appKey: '',
    placeholder: 'Just go go',
    avatar: 'mm',
    meta: meta,
    pageSize: '10' || 10,
    visitor: false
  });
  </script>

     







</body>
</html>